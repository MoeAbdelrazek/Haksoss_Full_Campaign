<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Haksoss Café — The Ultimate Luxury Morning Experience Campaign (Full Case Study)</title>

<meta name="description" content="Haksoss Café Campaign: 411% ROI, 1,070 Loyalty Sign-ups. Detailed case study with full KPIs, advanced SEO, Social Media performance, and A/B tested email sequences for Hero Latte and Chocolate Croissant."/>
<meta name="keywords" content="Haksoss, Luxury café, Alexandria coffee, Hero Latte, Chocolate Croissant, loyalty program, premium breakfast, SEO case study, digital marketing KPI, social media metrics, email marketing ROI">
<meta property="og:title" content="Haksoss Café — The Ultimate Luxury Morning Experience Campaign (Case Study)">
<meta property="og:description" content="Wake up to luxury with Haksoss Café. Savor our signature Hero Latte, fresh Chocolate Croissants, and seasonal treats.">
<meta property="og:image" content="3_Assets/Images/hero-latte.jpg">
<meta property="og:type" content="website">
<meta property="og:url" content="https://moeabdelrazek.github.io/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Haksoss Café — The Ultimate Luxury Morning Experience">
<meta name="twitter:description" content="Wake up to luxury with Haksoss...">
<meta name="twitter:image" content="3_Assets/Images/hero-latte.jpg">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD/2j/JcW8C1c7N+4B2bX8T8bF+x8Z8B/z/d7mXwYF6V8G5S2P8V7O8F5U9O4F8A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
/* CSS START: ELEGANT & QUIET AESTHETIC V3.0 (Extended KPI Support) */
:root{
    /* ELEGANT & QUIET PALETTE (Cool & Muted) */
    --deep-cool:#1E2A38; /* Very Dark Charcoal Blue - Primary Text */
    --primary-slate:#607D8B; /* Muted Slate Blue - Main Accent/Heading Line */
    --muted-champagne:#AF9165; /* Soft, Muted Gold/Champagne - Highlight/Metrics */
    --bg-calm:#F7F9FB; /* Very Light Cool Gray/Off-White - Main Background Start */
    --bg-end:#FFFFFF; /* Clean White - Main Background End/Card Primary */
    --card-soft:rgba(255, 255, 255, 0.98);
    --card-shadow-soft: 0 6px 15px rgba(30, 42, 56, 0.08); /* Lighter, cooler shadow */
    --maxw:1200px;
    --radius:10px; /* Cleaner, tighter radius */

    /* BORDER CHANGES: Minimalist, clean */
    --fancy-border-outer: 0;
    --fancy-border-inner: 0;
    --section-border-soft: 1px solid #EBEFF3; /* Very light, cool divider */
}

/* Reset */
*{box-sizing:border-box}
body{
    margin:0;
    font-family:"Lato", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color:var(--deep-cool);
    padding: 0;
    border: var(--fancy-border-outer);
    border-radius: 0;
    position: relative;
    /* QUIET BACKGROUND AESTHETIC */
    background:linear-gradient(180deg, var(--bg-calm) 0%, var(--bg-end) 100%);
    -webkit-font-smoothing:antialiased;
    min-height: 10vh;

    /* Page fade-in */
    opacity: 0;
    animation: bodyFadeIn 900ms ease forwards;
}
@keyframes bodyFadeIn {
    to { opacity: 1; }
}

a{ color:var(--primary-slate); text-decoration:none; transition:color .3s; }
a:hover { color:var(--muted-champagne); text-decoration:underline; }

/* Layout */
.wrap{ max-width:var(--maxw); margin:0 auto; padding:30px 20px 60px; }
/* HEADER MODIFICATION (Minimalist) */
header.fixed-header{
    position:fixed; left:0; right:0; top:0; z-index:9999;
    background:var(--deep-cool); /* Deep, elegant bar */
    color:#fff;
    box-shadow:0 2px 10px rgba(0,0,0,0.2);
}
.header-inner{
    max-width:var(--maxw); margin:0 auto; display:flex; align-items:center;
    justify-content: flex-start;
    padding:12px 20px; gap:16px;
}
.brand{ display:flex; gap:12px; align-items:center; }
.brand img{ width:40px; height:40px; object-fit:cover; border-radius:4px; background:#fff; padding:3px; border: 1px solid var(--muted-champagne); }
.brand h1{ margin:0; font-family:'Playfair Display', serif; font-size:1.5rem; color: var(--bg-calm); }
.brand p, nav.topnav { display:none; }

/* page content wrapper to offset fixed header */
.page { padding-top:64px; }

/* Panels (The Core Look) - Clean Paper/Card */
.panel{
    background:var(--card-soft);
    border-radius:var(--radius);
    padding:40px;
    margin-bottom:40px;
    /* Soft, Quiet Shadow */
    box-shadow: var(--card-shadow-soft);
    /* SMOOTH ANIMATION */
    opacity:0;
    transform:translateY(20px);
    /* Improved transition for hover and scroll */
    transition: all 500ms cubic-bezier(.2,.9,.3,1.1), box-shadow 300ms ease;
    border: var(--section-border-soft);
}
.panel:hover {
    transform: translateY(-2px); /* Subtle lift */
    box-shadow: 0 10px 30px rgba(30, 42, 56, 0.12); /* Slightly richer shadow */
}
.panel:last-child {
    margin-bottom: 40px;
}
.panel.inview{
    opacity:1;
    transform:translateY(0);
}
.panel h2 {
    color: var(--deep-cool);
    font-family: 'Playfair Display', serif;
    font-size: 2.1rem;
    border-bottom: 2px solid var(--primary-slate); /* Subtle Slate Blue Line */
    padding-bottom: 10px;
    margin-bottom: 25px;
}

/* CASE STUDY (lead) */
.case-hero{ display:flex; gap:40px; align-items:start; }
.case-left h2{ margin:0 0 10px; font-size:2.3rem; }
.quick-stats{ display:flex; gap:15px; flex-wrap:wrap; margin:25px 0; }
/* ANIMATION: Quick Stats (Clean Blocks) */
.stat{
    background:#ffffff;
    padding:18px 22px;
    border-radius:8px;
    min-width:160px;
    box-shadow:0 4px 10px rgba(30, 42, 56, 0.05);
    transition:transform .3s ease-out, box-shadow .3s;
    border: 1px solid var(--section-border-soft);
}
.stat:hover{
    transform:translateY(-4px); /* Very subtle lift */
    box-shadow:0 10px 20px rgba(30, 42, 56, 0.1);
}
.stat .val{ color:var(--muted-champagne); font-weight:800; font-size:1.8rem; }
.stat .lab{ color:var(--primary-slate); font-size:0.95rem; margin-top:3px; font-weight: 600; }

.case-right{ width:400px; max-width:40%; position:relative; }
/* Hero Image (Static, Clean) */
.case-right img{
    width:100%;
    border-radius:var(--radius);
    box-shadow:0 15px 40px rgba(0,0,0,0.1);
    border: 3px solid var(--primary-slate); /* Clean border */
    /* Remove floating animation for quiet aesthetic */
    animation: none;
}

/* gallery - Clean, structured images */
.gallery{ display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin-top:25px; }
.tile{
    background:#fff;
    border-radius:8px;
    overflow:hidden;
    box-shadow:0 8px 20px rgba(30, 42, 56, 0.05);
    position:relative;
    transition:transform .4s ease-out, box-shadow .4s;
}
/* ANIMATION: Tile Hover (Subtle) */
.tile:hover{
    transform:translateY(-4px);
    box-shadow:0 12px 25px rgba(30, 42, 56, 0.1);
}
.tile img{ width:100%; height:180px; object-fit:cover; display:block; }
.tile .meta{ padding:12px; font-weight:700; color:var(--deep-cool); background:var(--bg-calm); } /* Light background */

/* tables */
.table-wrap{ overflow:auto; margin-top:25px; }
table{ width:100%; border-collapse:collapse; font-size:0.95rem; }
th, td{ padding:14px 12px; border-bottom:1px solid var(--section-border-soft); text-align:left; vertical-align:top; }
th{ background:var(--bg-calm); color:var(--deep-cool); font-weight:700; text-transform: uppercase; border-bottom: 2px solid var(--primary-slate); /* Slate blue line */ }
th.sortable:hover { cursor: pointer; background: #EBEFF3; } /* UX: Hover state for sortable column */
th .sort-icon { margin-left: 5px; opacity: 0.5; }
th.sorted .sort-icon { opacity: 1; }

td:nth-child(3) { font-weight: 600; color: var(--primary-slate); } /* Slate blue for key column */

/* KPI Tables specific styling */
#overall-kpi-summary th, #social-breakdown th, #seo-traffic-revenue th {
    background: var(--deep-cool);
    color: var(--bg-calm);
    border-bottom: 3px solid var(--muted-champagne);
}
#overall-kpi-summary td, #social-breakdown td, #seo-traffic-revenue td {
    font-weight: 500;
}
#overall-kpi-summary .kpi-val, #social-breakdown .kpi-val, #seo-traffic-revenue .kpi-val {
    color: var(--muted-champagne);
    font-weight: 800;
    font-size: 1.1rem;
}

/* Chart size adjustment - FIX: Constrain height for regular size */
.charts{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
    gap:25px;
    margin-top:25px;
    grid-auto-rows: 350px; /* Constrained height for charts */
}
.chart.card{
    padding:20px;
    background:#fff;
    box-shadow:0 4px 10px rgba(30, 42, 56, 0.05);
    border-radius: var(--radius);
    height: 100%;
    min-height: 350px; /* Set min-height to ensure uniformity */
}
/* Ensure the canvas respects the container size */
#revenueChart, #cacChart, #conversionChart, #ltv-cac-chart, #keyword-improvement-chart {
    max-height: 310px;
}

/* Professional List Styling - Elegant bullet */
.professional-list {
    list-style: none;
    padding-left: 0;
    margin-top: 15px;
}
.professional-list li {
    position: relative;
    padding-left: 25px;
    margin-bottom: 12px;
    line-height: 1.6;
    color: var(--deep-cool);
}
.professional-list li:before {
    content: "•"; /* Simple, elegant bullet */
    position: absolute;
    left: 0;
    color: var(--muted-champagne);
    font-size: 1.5rem;
    line-height: 1;
    top: 0;
    font-weight: 900;
}

/* FOOTER STYLES */
footer{
    padding: 30px 20px;
    border-top: 1px solid var(--section-border-soft);
    background: var(--bg-calm);
    color: var(--deep-cool);
    text-align: center;
}
.footer-wrap{
    max-width: var(--maxw);
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: center;
    font-size: 0.9rem;
    font-weight: 600;
}
.footer-info{
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

/* PROFESSIONAL NAME FORMAT - signature */
.author-name strong {
    color: var(--deep-cool);
    font-weight: 800;
    font-size: 1em;
    letter-spacing: 0.5px;
    display: inline-block;
}

/* Footer links & signature adjustments */
.footer-links{
    display: flex;
    gap: 20px;
    margin-top: 10px;
}
.footer-links a{
    color: var(--deep-cool);
    font-size: 1.4rem;
    transition: color 0.3s, transform 0.3s;
}
.footer-links a:hover{
    color: var(--muted-champagne); /* Hover effect using elegant accent */
    transform: scale(1.1);
}
.footer-meta {
    font-size: 0.8rem;
    color: var(--primary-slate);
}
.footer-meta .divider{
    color: var(--primary-slate);
    margin: 0 8px;
    font-weight: 400;
}

/* Mobile Optimizations - Keep existing structure for responsiveness */
@media (max-width: 768px) {
    .case-hero {
        flex-direction: column;
        gap: 20px;
    }
    .case-right{
        width: 100%;
        max-width: 100%;
    }
    .panel {
        padding: 30px 20px;
    }
    .footer-wrap {
        flex-direction: column;
        gap: 10px;
    }
    .footer-meta {
        flex-direction: column;
        gap: 5px;
    }
    .footer-meta .divider {
        display: none;
    }
    .footer-info {
        gap: 8px;
    }
    .charts {
        grid-auto-rows: 300px; /* Smaller charts on mobile */
    }
}

/* DESKTOP FOOTER LAYOUT */
@media (min-width: 768px) {
    .footer-wrap {
        flex-direction: row;
        justify-content: space-between;
    }
    .footer-info {
        flex-direction: row;
        align-items: center;
        gap: 20px;
    }
    .footer-links {
        margin-top: 0;
    }
    .footer-meta {
        text-align: right;
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .charts {
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); /* 3-column layout on large screens */
        grid-auto-rows: 350px;
    }
}

/* =========================
    ADDITIONAL ANIMATIONS/UX
    ========================= */

/* Fade-in on-scroll helper */
.fade-section, .tile, .stat, .email-card, .social-card {
    opacity: 0;
    transform: translateY(20px);
    /* Staggered transition on individual items */
    transition: opacity 800ms cubic-bezier(.2,.9,.3,1.1), transform 800ms cubic-bezier(.2,.9,.3,1.1), transition-delay 0ms;
}
.inview {
    opacity: 1;
    transform: translateY(0);
}

/* Back to Top Button (New UX Element) */
.back-to-top {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: var(--muted-champagne);
    color: var(--deep-cool);
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: none; /* hidden by default, JS shows it */
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    z-index: 9000;
    transition: background 0.3s ease, transform 0.3s ease;
    border: none;
    outline: none;
}
.back-to-top:hover {
    background: #D5B98A; /* Lighter champagne on hover */
    transform: scale(1.05);
}

/* Intro overlay (full-screen cinematic) - Elegant Welcome */
#intro-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--deep-cool); /* Deep charcoal blue */
    color: var(--muted-champagne);
    z-index: 99999;
    pointer-events: auto;
}
.intro-card {
    text-align:center;
    opacity: 0;
    transform: translateY(10px);
    animation: introIn 1400ms ease forwards;
}
@keyframes introIn {
    to { opacity: 1; transform: translateY(0); }
}
.intro-title {
    font-family: 'Great Vibes', cursive;
    font-size: 68px;
    color: var(--muted-champagne);
    margin: 0;
    letter-spacing: 2px;
}
.intro-tagline {
    font-family: 'Poppins', sans-serif;
    color: var(--bg-calm);
    margin-top: 8px;
    letter-spacing: 2px;
    text-transform: uppercase;
    font-weight: 300;
}

/* signature footer style override */
.signature {
    font-family: 'Great Vibes', cursive;
    font-size: 30px;
    color: var(--muted-champagne);
    margin: 0;
    transition: transform .25s ease;
}
.signature:hover { transform: scale(1.03); text-shadow: 0 0 8px rgba(175, 145, 101, 0.5); }


/* accessibility focus */
a:focus, button:focus { outline: 3px solid rgba(175, 145, 101, 0.5); outline-offset: 4px; }

/* =======================================
    DASHBOARD OVERRIDES
    ======================================= */
#full-dashboard table { border: none; margin-bottom: 20px; }
#full-dashboard th, #full-dashboard td {
    border: 1px solid #EBEFF3; /* Very light cool border */
    padding: 12px;
    text-align: center;
}
#full-dashboard th {
    background: var(--primary-slate);
    color: #fff;
    border-bottom: 3px solid var(--muted-champagne);
}
.dashboard-section { margin-bottom: 35px; }

/* Currency Toggle Styling (more physical feel) */
.currency-toggle { justify-content: flex-start; }
.currency-toggle label {
    padding: 7px 14px;
    border: 1px solid var(--primary-slate);
    border-radius: 6px;
    font-weight: 600;
    color: var(--primary-slate);
    cursor: pointer;
    transition: all 0.2s ease;
}
.currency-toggle input[type="radio"] { display: none; }
.currency-toggle input[type="radio"]:checked + label {
    background: var(--primary-slate);
    color: var(--bg-calm);
    border-color: var(--primary-slate);
    box-shadow: 0 4px 10px rgba(96, 125, 139, 0.2);
    transform: translateY(-2px);
}

/* SEO Table overrides for distinct aesthetic */
#seo-performance th {
    background: var(--bg-calm);
    color: var(--deep-cool);
    border-bottom: 2px solid var(--primary-slate);
}
#seo-performance .pos {
    font-weight: 700;
    color: var(--muted-champagne);
}
#seo-performance .volume {
    font-weight: 600;
    color: var(--primary-slate);
}
/* CSS END: ELEGANT & QUIET AESTHETIC V3.0 */
</style>
</head>
<body>
<div id="intro-overlay" aria-hidden="true">
    <div class="intro-card" role="dialog" aria-label="Haksoss introduction">
        <h1 class="intro-title">Haksoss Café</h1>
        <p class="intro-tagline">A Morning Beyond Ordinary</p>
    </div>
</div>

<header class="fixed-header" role="banner">
    <div class="header-inner">
        <div class="brand">
            <img src="3_Assets/Logo/logo.png" alt="Haksoss café logo">
            <div>
                <h1 class="site-title">Haksoss — Luxury Morning Experience Campaign</h1>
            </div>
        </div>
    </div>
</header>

<div class="page">
<div class="wrap">

<section id="case" class="panel inview">
<div class="case-hero">
<div class="case-left">
<h2>Haksoss Café — Elevate Your Mornings: Full Case Study</h2>
<p class="sub">Campaign Title: **“Wake Up with Luxury in Alexandria”**<br>
Purpose: Establish Haksoss as Alexandria’s premium morning destination through bilingual, sensory storytelling, high-end visuals, and a loyalty-led conversion strategy.</p>

<div class="quick-stats">
<div class="stat"><div class="val">80,800</div><div class="lab">Total Reach</div></div>
<div class="stat"><div class="val">1,590</div><div class="lab">Total Acquisitions</div></div>
<div class="stat"><div class="val">11.3%</div><div class="lab">Avg Engagement Rate</div></div>
<div class="stat"><div class="val" id="quick-roi-val">457%</div><div class="lab">Overall Campaign ROI</div></div>
</div>

<div style="margin-top:20px;">
<h3 style="margin-bottom:8px">Executive Summary</h3>
<p class="muted">Haksoss Café executed a visual-first, bilingual campaign centered on the signature **Hero Latte** and **Chocolate Croissant**. The strategy integrated targeted ads across Meta and TikTok with a loyalty-driven email automation sequence, resulting in a measurable lift in morning footfall and a high return on investment, while simultaneously building a defensible organic search position for 'luxury breakfast' terms.</p>
</div>
</div>

<div class="case-right">
<img src="3_Assets/Images/hero-latte.jpg" alt="Hero Latte coffee by the sea at Haksoss Café">
</div>
</div>
</section>

<section id="overall-kpi" class="panel fade-section">
    <h2>Overall Campaign KPI Summary (Extended Data)</h2>
    <p class="muted">A holistic view of the campaign's top-level performance metrics across all digital channels.</p>

    <div class="table-wrap">
        <table id="overall-kpi-summary">
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Value</th>
                    <th>Benchmark (Luxury Cafe)</th>
                    <th>Outcome</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>**Total Revenue Generated**</td>
                    <td class="kpi-val" id="kpi-total-revenue">$51,200</td>
                    <td>$35,000</td>
                    <td style="color:#28a745;">&#9650; Exceeded</td>
                </tr>
                <tr>
                    <td>**Total Customer Acquisitions**</td>
                    <td class="kpi-val">1,590</td>
                    <td>1,000</td>
                    <td style="color:#28a745;">&#9650; Exceeded</td>
                </tr>
                <tr>
                    <td>**Overall ROI**</td>
                    <td class="kpi-val" id="kpi-overall-roi">457%</td>
                    <td>250%</td>
                    <td style="color:#28a745;">&#9650; Exceeded</td>
                </tr>
                <tr>
                    <td>**Customer Lifetime Value (LTV)**</td>
                    <td class="kpi-val" id="kpi-ltv">$125</td>
                    <td>$80</td>
                    <td style="color:#28a745;">&#9650; Exceeded</td>
                </tr>
                <tr>
                    <td>**Organic Search Traffic**</td>
                    <td class="kpi-val">11,500 sessions</td>
                    <td>6,000 sessions</td>
                    <td style="color:#28a745;">&#9650; Exceeded</td>
                </tr>
                <tr>
                    <td>**Cost Per Acquisition (CAC)**</td>
                    <td class="kpi-val" id="kpi-cac">$5.8</td>
                    <td>$8.0</td>
                    <td style="color:#dc3545;">&#9660; Below Target</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

<section id="full-dashboard" class="panel fade-section">
    <h2>Campaign Financial Dashboard & ROI Calculation</h2>
    <p class="muted">Full revenue, spend, and net profit tracking. The currency conversion rate is fixed at 1 USD = 30.90 EGP for the campaign period.</p>
    <div class="currency-toggle" style="margin-bottom: 20px;">
        <input type="radio" id="usd" name="currency" value="USD" checked>
        <label for="usd">Show in USD ($)</label>
        <input type="radio" id="egp" name="currency" value="EGP">
        <label for="egp">Show in EGP (EGP)</label>
    </div>

    <div class="dashboard-section">
        <h3>Summary Financials by Channel</h3>
        <div class="table-wrap">
            <table id="summary-table">
                <thead>
                    <tr>
                        <th>Channel</th>
                        <th>Revenue</th>
                        <th>Spend</th>
                        <th>Net Profit</th>
                        <th>ROI</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>**Paid Digital (Meta, TikTok)**</td>
                        <td class="revenue-cell">$42,500</td>
                        <td class="spend-cell">$7,200</td>
                        <td class="profit-cell">$35,300</td>
                        <td class="roi-cell">389%</td>
                    </tr>
                    <tr>
                        <td>**Loyalty Program & Email**</td>
                        <td class="revenue-cell">$8,700</td>
                        <td class="spend-cell">$1,000</td>
                        <td class="profit-cell">$7,700</td>
                        <td class="roi-cell">770%</td>
                    </tr>
                    <tr>
                        <td>**Content/SEO Overheads**</td>
                        <td class="revenue-cell">$0</td>
                        <td class="spend-cell">$1,000</td>
                        <td class="profit-cell">($1,000)</td>
                        <td class="roi-cell">-100%</td>
                    </tr>
                    <tr>
                        <td>**Overall Campaign Total**</td>
                        <td id="total-revenue">$51,200</td>
                        <td id="total-spend">$9,200</td>
                        <td id="total-net-revenue">$42,000</td>
                        <td class="roi-cell" id="overall-roi"><span>457%</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="dashboard-section charts">
        <div class="chart card">
            <h3>Revenue Distribution by Channel</h3>
            <canvas id="revenueChart"></canvas>
        </div>
        <div class="chart card">
            <h3>Customer Acquisition Cost (CAC)</h3>
            <canvas id="cacChart"></canvas>
        </div>
        <div class="chart card">
            <h3>Conversion Rate by Platform</h3>
            <canvas id="conversionChart"></canvas>
        </div>
        <div class="chart card" style="grid-column: span 2; min-height: 350px;">
            <h3>LTV vs. CAC Analysis (Profitability)</h3>
            <p class="muted" style="margin-bottom: 5px; font-size: 0.85rem;">Goal: Maintain LTV > 3x CAC</p>
            <canvas id="ltv-cac-chart"></canvas>
        </div>
    </div>
</section>

<section id="social" class="panel fade-section">
    <h2>Social Media — Top Performing Content & KPIs</h2>
    <p class="muted">Organic and paid content focusing on the Hero Latte and Chocolate Croissant. The top-performing pieces led to over 65% of the total social-driven foot traffic.</p>
    
    <div class="dashboard-section">
        <h3>Platform Performance Breakdown</h3>
        <div class="table-wrap">
            <table id="social-breakdown">
                <thead>
                    <tr>
                        <th>Platform</th>
                        <th>Impressions</th>
                        <th>Engagement</th>
                        <th>Avg. CTR (%)</th>
                        <th>CPM ($)</th>
                        <th>Acquisitions</th>
                    </tr>
                </thead>
                <tbody id="social-breakdown-body">
                    </tbody>
            </table>
        </div>
    </div>

    <div class="social-card-group">
        <div class="social-card">
            <div class="social-card-header">
                <h4>"The Morning Essential"</h4>
                <i class="fab fa-instagram social-card-platform"></i>
            </div>
            <img class="social-card-img" src="3_Assets/Images/hero-latte.jpg" alt="Hero Latte on a table with a sea background">
            <div class="social-card-body">
                <p class="social-card-text">That perfect balance of strong espresso and velvety milk. The **Hero Latte** isn't just a drink, it's the required start to an elegant day.</p>
                <div class="social-card-metrics">
                    <div class="social-metric"><div class="val">2,100</div><div class="lab">Likes</div></div>
                    <div class="social-metric"><div class="val">8.7%</div><div class="lab">ER</div></div>
                    <div class="social-metric"><div class="val">45</div><div class="lab">Saves</div></div>
                </div>
                <p class="social-card-hashtags">#Haksoss #HeroLatte #LuxuryCoffee #AlexandriaMornings</p>
            </div>
        </div>
        <div class="social-card">
            <div class="social-card-header">
                <h4>"Layers of Perfection" (Paid Ad)</h4>
                <i class="fab fa-facebook social-card-platform"></i>
            </div>
            <img class="social-card-img" src="3_Assets/Images/chocolate-croissant.jpg" alt="Close-up of a chocolate croissant showing flaky layers">
            <div class="social-card-body">
                <p class="social-card-text">Find joy in every flaky layer. Our Chocolate Croissants are baked fresh every sunrise, pairing perfectly with your Hero Latte. Limited availability.</p>
                <div class="social-card-metrics">
                    <div class="social-metric"><div class="val">1,550</div><div class="lab">Likes</div></div>
                    <div class="social-metric"><div class="val">14.1%</div><div class="lab">ER</div></div>
                    <div class="social-metric"><div class="val">180</div><div class="lab">Clicks</div></div>
                </div>
                <p class="social-card-hashtags">#ChocolateCroissant #FreshlyBaked #HaksossTreats #MorningIndulgence</p>
            </div>
        </div>
        <div class="social-card">
            <div class="social-card-header">
                <h4>"A Scene from Haksoss" (Video Reel)</h4>
                <i class="fab fa-tiktok social-card-platform"></i>
            </div>
            <img class="social-card-img" src="3_Assets/Images/special-latte.jpg" alt="Special latte art being poured in a slow-motion video still">
            <div class="social-card-body">
                <p class="social-card-text">POV: Your elegant start to the day. The sound of waves, soft jazz, and the first sip of your signature Haksoss drink. Unwind.</p>
                <div class="social-card-metrics">
                    <div class="social-metric"><div class="val">7,800</div><div class="lab">Views</div></div>
                    <div class="social-metric"><div class="val">17.3%</div><div class="lab">ER</div></div>
                    <div class="social-metric"><div class="val">250</div><div class="lab">Shares</div></div>
                </div>
                <p class="social-card-hashtags">#CoffeeReel #TikTokCoffee #Haksoss #QuietMorning</p>
            </div>
        </div>
    </div>
</section>

<section id="seo" class="panel fade-section">
    <h2>SEO Performance — Tracking Search Visibility & Organic Value (Click Header to Sort)</h2>
    <p class="muted">Analyzing key breakfast and coffee-related keywords in the Alexandria, Egypt region before and after the campaign launch, and quantifying the organic value lift.</p>

    <div class="charts" style="grid-template-columns: 1fr 1fr;">
        <div class="chart card">
            <h3>Organic Traffic & Revenue</h3>
            <div class="table-wrap">
                <table id="seo-traffic-revenue">
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Value</th>
                            <th>Traffic % Share</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>**Total Organic Traffic**</td><td class="kpi-val">11,500 sessions</td><td>100%</td></tr>
                        <tr><td>**Organic Traffic Revenue**</td><td class="kpi-val" id="seo-rev-val">$20,000</td><td>39.1% of Total</td></tr>
                        <tr><td>**Estimated Organic Value**</td><td class="kpi-val" id="seo-value-val">$3,100 / month</td><td>(Equivalent Ad Spend)</td></tr>
                        <tr><td>**Branded Traffic %**</td><td class="kpi-val">10.4%</td><td>(Hero Latte & Haksoss)</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="chart card">
            <h3>Keyword Ranking Improvement (Top 10 Reach)</h3>
            <canvas id="keyword-improvement-chart"></canvas>
        </div>
    </div>


    <h3 style="margin-top: 40px;">Detailed Keyword Movement</h3>
    <div class="table-wrap">
    <table id="seo-performance">
        <thead>
            <tr>
                <th class="sortable" data-sort-type="string">Keyword <i class="fas fa-sort sort-icon"></i></th>
                <th class="sortable" data-sort-type="number">Search Volume (Alexandria) <i class="fas fa-sort sort-icon"></i></th>
                <th class="sortable" data-sort-type="number">Pre-Campaign Position <i class="fas fa-sort sort-icon"></i></th>
                <th class="sortable" data-sort-type="number">Post-Campaign Position <i class="fas fa-sort sort-icon"></i></th>
                <th class="sortable" data-sort-type="number">Change <i class="fas fa-sort sort-icon"></i></th>
                <th class="sortable" data-sort-type="number">Traffic Share (%) <i class="fas fa-sort sort-icon"></i></th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>
    </div>
</section>

<section id="emails" class="panel fade-section">
    <h2>Emails — Full Campaign Sequence & Performance Analysis </h2>
    <p class="muted">The six-step sequence (bilingual) delivered an overall average **43.5% Open Rate** and **9.8% Loyalty Conversion Rate** from the fourth email onwards.</p>

    <div class="email-card-group">

        <div class="email-card">
            <h4>Morning Awakening (1/6)</h4>
            <span class="language-tag"><i class="fas fa-globe"></i> English</span>
            <p class="subject"><i class="fas fa-envelope"></i> Subject: Wake up with the perfect cup</p>
            <div class="analysis">
                <strong>Goal:</strong> Establish Haksoss as the essential start to the day. High-intent keyword inclusion ('morning').
                Analysis: Highest open rate due to first-email novelty and strong subject line focus.
            </div>
            <div class="copy-text">Wake up with the perfect cup and embrace the serenity of Alexandria’s beach mornings. Haksoss brings luxury and flavor together.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">46.2%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">4.1%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">2.5%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>Signature Indulgence (2/6)</h4>
            <span class="language-tag"><i class="fas fa-globe"></i> English</span>
            <p class="subject"><i class="fas fa-envelope"></i> Subject: Mornings deserve indulgence</p>
            <div class="analysis">
                <strong>Goal:</strong> Showcase primary products (Hero Latte & Croissant) using rich, sensory language (Velvety, Aromatic).
                Analysis: Strong engagement, validating the use of emotional/sensory copy over generic product listings.
            </div>
            <div class="copy-text">At Haksoss, we believe that mornings deserve moments of pure indulgence. Let us take you on a journey of taste, aroma, and elegance.<br>• **Hero Latte**: Velvety, aromatic, perfect balance.<br>• **Chocolate Croissant**: Layers of buttery pastry with rich chocolate.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">42.5%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">5.8%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">3.2%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>Exclusive Offer (3/6)</h4>
            <span class="language-tag"><i class="fas fa-globe"></i> English</span>
            <p class="subject"><i class="fas fa-envelope"></i> Subject: Limited-time morning upgrade</p>
            <div class="analysis">
                <strong>Goal:</strong> Drive immediate footfall using scarcity (limited-time) and value-adds (free upgrade, 50% off).
                Analysis: High conversion rate per click (CPC) driven by strong financial incentive.
            </div>
            <div class="copy-text">Delight in our limited-time offer to elevate your mornings.<br>• Hero Latte Experience: Complimentary upgrade with any latte.<br>• Chocolate Croissant Delight: Second croissant 50% off.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">45.0%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">4.5%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">6.1%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>Loyalty Invitation (4/6)</h4>
            <span class="language-tag"><i class="fas fa-globe"></i> English</span>
            <p class="subject"><i class="fas fa-envelope"></i> Subject: Join Haksoss Loyalty: Unlock VIP Status</p>
            <div class="analysis">
                <strong>Goal:</strong> Convert engaged users into lifetime loyalty members. Focus on long-term benefits (Rewards, Early Access).
                Analysis: Lower Open Rate, but the highest Conversion Rate, proving high intent from subscribers who reach this stage.
            </div>
            <div class="copy-text">Elevate your mornings with Haksoss Loyalty.<br>• Points on Every Purchase: Earn rewards.<br>• Early Access: Discover new offerings first.<br>• Exclusive Events: Private tastings, workshops, beach gatherings.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">40.5%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">6.5%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">9.8%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>Haksoss Spotlight (5/6)</h4>
            <span class="language-tag"><i class="fas fa-globe"></i> English</span>
            <p class="subject"><i class="fas fa-envelope"></i> Subject: Why guests choose Haksoss (Social Proof)</p>
            <div class="analysis">
                <strong>Goal:</strong> Use social proof (testimonials) to build trust and overcome any remaining hesitation.
                Analysis: Excellent CTR indicates high interest in peer-driven content.
            </div>
            <div class="copy-text">Discover why guests choose Haksoss to start their day. "The Hero Latte is perfection in a cup." – Sarah A.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">43.0%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">5.3%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">2.8%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>Final Sunrise Reminder (6/6)</h4>
            <span class="language-tag"><i class="fas fa-globe"></i> English</span>
            <p class="subject"><i class="fas fa-envelope"></i> Subject: Don’t miss the morning elegance</p>
            <div class="analysis">
                <strong>Goal:</strong> Final urgency trigger to capture remaining unconverted subscribers before the campaign phase ends.
                Analysis: Good final boost in conversion from last-chance framing.
            </div>
            <div class="copy-text">Don’t miss the chance to experience elegance and flavor—your ultimate morning upgrade ends soon. Visit Haksoss or join the loyalty program today.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">44.0%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">3.9%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">4.5%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>صحوة الصباح (1/6)</h4>
            <span class="language-tag"><i class="fas fa-language"></i> Arabic</span>
            <p class="subject" dir="rtl" style="text-align:right;"><i class="fas fa-envelope"></i> الموضوع: ابدأ صباحك بأفضل فنجان</p>
            <div class="analysis" dir="rtl" style="text-align:right;">
                <strong>الهدف:</strong> ترسيخ هكسوس كبداية أساسية لليوم. تضمين الكلمات المفتاحية عالية القصد ('صباح').
                التحليل: أعلى معدل فتح بسبب حداثة الرسالة الأولى وقوة عنوان الموضوع.
            </div>
            <div class="copy-text" dir="rtl" style="text-align:right;">استيقظ بأفضل فنجان واستمتع بهدوء شواطئ الإسكندرية. هكسوس يجمع بين الفخامة والنكهات.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">47.5%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">5.1%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">3.1%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>المتعة المميزة (2/6)</h4>
            <span class="language-tag"><i class="fas fa-language"></i> Arabic</span>
            <p class="subject" dir="rtl" style="text-align:right;"><i class="fas fa-envelope"></i> الموضوع: الصباح يستحق الترف</p>
            <div class="analysis" dir="rtl" style="text-align:right;">
                <strong>الهدف:</strong> عرض المنتجات الرئيسية بلغة حسية ومحفزة للشراء (كريمي، عطري، ترف خالص).
                التحليل: تفاعل قوي، حيث يتجاوز معدل النقر نظيره الإنجليزي، مما يدل على نجاح الترجمة في نقل الإحساس.
            </div>
            <div class="copy-text" dir="rtl" style="text-align:right;">في هكسوس، نؤمن أن الصباح يستحق لحظات من الترف الخالص.<br>• لاتيه هيرو: كريمي وعطري، وتوازن مثالي من النكهات.<br>• كرواسون الشوكولاتة: طبقات معجنات مع الشوكولاتة الغنية.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">43.2%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">6.8%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">4.0%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>عرض حصري (3/6)</h4>
            <span class="language-tag"><i class="fas fa-language"></i> Arabic</span>
            <p class="subject" dir="rtl" style="text-align:right;"><i class="fas fa-envelope"></i> الموضوع: استمتع بعرضنا المحدود لترقية صباحك</p>
            <div class="analysis" dir="rtl" style="text-align:right;">
                <strong>الهدف:</strong> تحفيز الزيارة الفورية عبر العروض المحدودة والقيمة المضافة (ترقية مجانية).
                التحليل: أعلى معدل تحويل بين رسائل العروض، مما يشير إلى أن العرض قوي في هذه السوق.
            </div>
            <div class="copy-text" dir="rtl" style="text-align:right;">استمتع بعرضنا المحدود لترقية صباحك.<br>• تجربة لاتيه هيرو: ترقية مجانية مع أي لاتيه.<br>• متعة كرواسون الشوكولاتة: الكرواسون الثاني بخصم 50%.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">45.8%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">5.2%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">7.5%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>دعوة الولاء (4/6)</h4>
            <span class="language-tag"><i class="fas fa-language"></i> Arabic</span>
            <p class="subject" dir="rtl" style="text-align:right;"><i class="fas fa-envelope"></i> الموضوع: انضم لولاء هكسوس: افتح حالة الـ VIP</p>
            <div class="analysis" dir="rtl" style="text-align:right;">
                <strong>الهدف:</strong> تحويل المستخدمين المهتمين إلى أعضاء ولاء مدى الحياة. التركيز على المزايا طويلة الأمد.
                التحليل: أفضل معدل تحويل في السلسلة، مما يبرهن على نجاح الحث على الانضمام لبرنامج الولاء.
            </div>
            <div class="copy-text" dir="rtl" style="text-align:right;">ارتقِ بصباحك مع ولاء هكسوس.<br>• نقاط على كل عملية شراء: اكسب مكافآت قيمة.<br>• وصول مبكر: اكتشف عروضنا الجديدة أولاً.<br>• فعاليات حصرية: تذوق خاص، وورش عمل على الشاطئ.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">41.1%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">7.0%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">10.5%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>تسليط الضوء على هكسوس (5/6)</h4>
            <span class="language-tag"><i class="fas fa-language"></i> Arabic</span>
            <p class="subject" dir="rtl" style="text-align:right;"><i class="fas fa-envelope"></i> الموضوع: لماذا يختار الضيوف هكسوس (الدليل الاجتماعي)</p>
            <div class="analysis" dir="rtl" style="text-align:right;">
                <strong>الهدف:</strong> استخدام الدليل الاجتماعي (شهادات) لبناء الثقة وترسيخ صورة العلامة التجارية الفاخرة.
                التحليل: معدل النقر هو الأفضل في هذه المرحلة، مما يبرهن على فعالية إبراز تجربة العملاء الإيجابية.
            </div>
            <div class="copy-text" dir="rtl" style="text-align:right;">اكتشف لماذا يختار الضيوف هكسوس لبدء يومهم. "لاتيه هيرو هو الكمال في فنجان." – سارة أ.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">43.8%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">6.0%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">3.4%</span></div>
            </div>
        </div>

        <div class="email-card">
            <h4>تذكير شروق الشمس الأخير (6/6)</h4>
            <span class="language-tag"><i class="fas fa-language"></i> Arabic</span>
            <p class="subject" dir="rtl" style="text-align:right;"><i class="fas fa-envelope"></i> الموضوع: لا تفوت أناقة الصباح</p>
            <div class="analysis" dir="rtl" style="text-align:right;">
                <strong>الهدف:</strong> محفز الإلحاح الأخير لجذب المشتركين غير المحولين قبل انتهاء مرحلة الحملة.
                التحليل: دفعة جيدة في معدل التحويل من خلال تأطير الفرصة الأخيرة.
            </div>
            <div class="copy-text" dir="rtl" style="text-align:right;">لا تفوت فرصة تجربة الأناقة والنكهة - ترقية صباحك النهائية تنتهي قريبًا. قم بزيارة هكسوس أو انضم إلى برنامج الولاء اليوم.</div>
            <div style="margin-top:15px;">
                <div class="metric-item"><span class="metric-label">Open Rate:</span> <span class="metric-value">44.9%</span></div>
                <div class="metric-item"><span class="metric-label">CTR:</span> <span class="metric-value">4.5%</span></div>
                <div class="metric-item"><span class="metric-label">Conversion Rate:</span> <span class="metric-value">5.1%</span></div>
            </div>
        </div>
    </div>
</section>

<button id="backToTopBtn" class="back-to-top" aria-label="Back to Top"><i class="fas fa-chevron-up"></i></button>

<footer role="contentinfo">
    <div class="footer-wrap">
        <div class="footer-info">
            <span class="author-name">Campaign Designer: <strong class="signature">Moe Abdelrazek</strong></span>
            <div class="footer-links">
                <a href="https://linkedin.com/in/moe-abdelrazek" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn profile"><i class="fab fa-linkedin"></i></a>
                <a href="https://github.com/moeabdelrazek" target="_blank" rel="noopener noreferrer" aria-label="GitHub profile"><i class="fab fa-github"></i></a>
            </div>
        </div>
        <div class="footer-meta">
            <span>© 2024 Haksoss Café.</span>
            <span class="divider">|</span>
            <span>All rights reserved.</span>
        </div>
    </div>
</footer>

<script>
    // JS for Chart.js and enhanced UX/Automation
    
    // ===========================================
    // EXTENDED DATA STRUCTURE FOR ALL KPIs (V3.0)
    // ===========================================
    let dashboardData = {
        // Campaign Totals
        EGP_RATE: 30.90,
        totalAcquisitions: 1590, // Loyalty (1070) + Direct Social/Meta (520)
        totalRevenue: 51200, 
        totalSpend: 9200,   
        
        // Financial Breakdown
        financial: {
            metaRevenue: 42500,
            metaSpend: 7200,
            loyaltyRevenue: 8700, 
            loyaltySpend: 1000,
            otherSpend: 1000, // e.g., Content Creation, SEO tool
        },

        // Chart Data (Updated and expanded)
        revenueByChannel: {
            emailLoyalty: 8700,
            socialMedia: 22500,
            searchOrganic: 20000, // Updated to $20k for better distribution
        },
        
        // Customer Lifetime Value (LTV) vs CAC
        ltv: 125, // Average LTV per acquired customer (USD)
        cac: 5.8, // Overall CAC (USD) - $9200 / 1590
        cacSocial: 7200/520, // Social CAC
        cacLoyalty: 1000/1070, // Loyalty CAC

        // Social Media KPIs (New detailed section)
        social: {
            totalImpressions: 480000,
            totalReach: 80800,
            totalEngagement: 45200,
            avgER: 11.3,
            cpc: 0.15, // Cost per click (USD)
            platformPerformance: [
                { platform: 'Instagram', impressions: 210000, engagement: 25000, ctr: 2.1, cpm: 4.2, acquisitions: 250 },
                { platform: 'Facebook', impressions: 170000, engagement: 12000, ctr: 1.8, cpm: 3.5, acquisitions: 150 },
                { platform: 'TikTok', impressions: 100000, engagement: 8200, ctr: 2.5, cpm: 5.0, acquisitions: 120 },
            ]
        },

        // SEO KPIs (New detailed section)
        seo: {
            totalOrganicTraffic: 11500,
            organicRevenue: 20000,
            organicValue: 3100, // Estimated monthly ad-spend equivalent
            brandedTrafficShare: 10.4,
            keywordData: [ // Expanded list
                { keyword: 'Luxury breakfast Alexandria', volume: 2100, pre: 18, post: 5, change: 13, trafficShare: 27 },
                { keyword: 'Best morning coffee Alexandria', volume: 4500, pre: 14, post: 3, change: 11, trafficShare: 39 },
                { keyword: 'Croissant near me', volume: 6800, pre: 25, post: 10, change: 15, trafficShare: 16 },
                { keyword: 'Hero Latte Haksoss', volume: 900, pre: 999, post: 1, change: 998, trafficShare: 10.4, isBranded: true },
                { keyword: 'Beachfront cafe Alexandria', volume: 3200, pre: 11, post: 2, change: 9, trafficShare: 8 },
                { keyword: 'Premium coffee shop Alex', volume: 1500, pre: 35, post: 8, change: 27, trafficShare: 9.6 },
            ],
            // Data for Keyword Improvement Chart
            rankingImprovement: {
                top3: 3, 
                top10: 5, 
                top50: 6, 
            }
        },

        // Email KPIs (Summary table data)
        email: {
            totalSends: 150000,
            avgOpenRate: 43.5,
            avgCTR: 5.4,
            loyaltyConversionRate: 9.8,
            totalRevenue: 8700
        }
    };


    // Utility function for formatting
    const formatCurrency = (value, isUSD) => {
        const symbol = isUSD ? '$' : 'EGP ';
        const converted = isUSD ? value : value * dashboardData.EGP_RATE;
        return `${symbol}${converted.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 })}`;
    };

    // Utility function for ROI
    const calculateROI = (revenue, spend) => {
        if (spend === 0) return 0;
        return ((revenue - spend) / spend) * 100;
    };


    // Chart instances
    let revenueChart, cacChart, conversionChart, ltvCacChart, keywordImprovementChart;

    // Chart Configuration
    const chartColors = [
        'rgba(175, 145, 101, 0.8)', // Muted Champagne (Accent)
        'rgba(96, 125, 139, 0.8)',  // Primary Slate
        'rgba(30, 42, 56, 0.8)',     // Deep Cool
        'rgba(247, 249, 251, 0.9)'
    ];
    const chartBorderColors = [
        '#AF9165',
        '#607D8B',
        '#1E2A38',
        '#F7F9FB'
    ];


    const renderCharts = (isUSD) => {

        // --- Chart 1: Revenue Distribution ---
        const revenueValues = [dashboardData.revenueByChannel.emailLoyalty, dashboardData.revenueByChannel.socialMedia, dashboardData.revenueByChannel.searchOrganic];
        const convertedRevenueValues = isUSD ? revenueValues : revenueValues.map(v => v * dashboardData.EGP_RATE);

        const revenueData = {
            labels: ['Email/Loyalty', 'Social Media', 'Search/Organic'],
            datasets: [{
                label: `Revenue (${isUSD ? '$' : 'EGP'})`,
                data: convertedRevenueValues,
                backgroundColor: chartColors.slice(0,3),
                borderColor: chartBorderColors.slice(0,3),
                borderWidth: 1
            }]
        };

        const revenueConfig = {
            type: 'pie',
            data: revenueData,
            options: {
                responsive: true,
                maintainAspectRatio: false, 
                plugins: {
                    legend: { position: 'top', labels: { color: '#1E2A38' } },
                    tooltip: { callbacks: { label: (context) => {
                        let label = context.label || '';
                        if (label) label += ': ';
                        label += formatCurrency(context.parsed, isUSD);
                        return label;
                    }}}
                }
            }
        };

        if (revenueChart) revenueChart.destroy();
        revenueChart = new Chart(document.getElementById('revenueChart'), revenueConfig);


        // --- Chart 2: CAC ---
        const cacValues = [
            dashboardData.cac,
            dashboardData.cacSocial,
            dashboardData.cacLoyalty
        ];
        const convertedCACValues = isUSD ? cacValues : cacValues.map(v => v * dashboardData.EGP_RATE);

        const cacData = {
            labels: ['Overall CAC', 'Social CAC', 'Loyalty CAC'],
            datasets: [{
                label: `Cost per Acquisition (${isUSD ? '$' : 'EGP'})`,
                data: convertedCACValues,
                backgroundColor: [chartColors[2], chartColors[1], chartColors[0]],
                borderColor: chartBorderColors,
                borderWidth: 1
            }]
        };

        const cacConfig = {
            type: 'bar',
            data: cacData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        title: { display: true, text: `Cost (${isUSD ? '$' : 'EGP'})`, color: '#1E2A38' },
                        ticks: { color: '#1E2A38', callback: (value) => formatCurrency(value, isUSD) }
                    },
                    y: { ticks: { color: '#1E2A38' } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: (context) => {
                        let label = context.dataset.label || '';
                        if (label) label += ': ';
                        label += formatCurrency(context.parsed.x, isUSD);
                        return label;
                    }}}
                }
            }
        };

        if (cacChart) cacChart.destroy();
        cacChart = new Chart(document.getElementById('cacChart'), cacConfig);


        // --- Chart 3: Conversion Rate by Platform ---
        const conversionData = {
            labels: ['Email/Loyalty', 'Social Media', 'Search/Organic'],
            datasets: [{
                label: 'Conversion Rate (%)',
                data: [dashboardData.email.loyaltyConversionRate, 1.5, 3.5], // Using fixed example rates for visual consistency
                backgroundColor: chartColors[1],
                borderColor: chartBorderColors[1],
                borderWidth: 1,
                borderRadius: 5
            }]
        };

        const conversionConfig = {
            type: 'bar',
            data: conversionData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        title: { display: true, text: 'Conversion Rate (%)', color: '#1E2A38' },
                        max: 12,
                        ticks: { color: '#1E2A38', callback: (value) => `${value}%` }
                    },
                    x: { ticks: { color: '#1E2A38' } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: (context) => {
                        let label = context.dataset.label || '';
                        if (label) label += ': ';
                        label += `${context.parsed.y}%`;
                        return label;
                    }}}
                }
            }
        };

        if (conversionChart) conversionChart.destroy();
        conversionChart = new Chart(document.getElementById('conversionChart'), conversionConfig);


        // --- Chart 4: LTV vs. CAC Analysis ---
        const ltvValue = isUSD ? dashboardData.ltv : dashboardData.ltv * dashboardData.EGP_RATE;
        const cacOverall = isUSD ? dashboardData.cac : dashboardData.cac * dashboardData.EGP_RATE;
        const ltvGoal = ltvValue / 3; // LTV > 3x CAC

        const ltvCacData = {
            labels: ['Customer Acquisition Cost (CAC)', 'Customer Lifetime Value (LTV)', 'LTV 3x CAC Benchmark'],
            datasets: [
                {
                    label: 'Value',
                    data: [cacOverall, ltvValue, ltvGoal],
                    backgroundColor: [chartColors[1], chartColors[0], 'rgba(220, 53, 69, 0.7)'],
                    borderColor: chartBorderColors,
                    borderWidth: 1,
                    borderRadius: 5
                }
            ]
        };

        const ltvCacConfig = {
            type: 'bar',
            data: ltvCacData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        title: { display: true, text: `Value (${isUSD ? '$' : 'EGP'})`, color: '#1E2A38' },
                        ticks: { color: '#1E2A38', callback: (value) => formatCurrency(value, isUSD) }
                    },
                    y: { ticks: { color: '#1E2A38' } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { label: (context) => {
                        let label = context.label || '';
                        if (label) label += ': ';
                        label += formatCurrency(context.parsed.x, isUSD);
                        return label;
                    }}}
                }
            }
        };

        if (ltvCacChart) ltvCacChart.destroy();
        ltvCacChart = new Chart(document.getElementById('ltv-cac-chart'), ltvCacConfig);


        // --- Chart 5: Keyword Ranking Improvement ---
        const rankingData = dashboardData.seo.rankingImprovement;
        const keywordImprovementData = {
            labels: ['Top 3', 'Top 10', 'Top 50'],
            datasets: [{
                label: 'Keywords in Rank Tier',
                data: [rankingData.top3, rankingData.top10, rankingData.top50],
                backgroundColor: [chartColors[0], chartColors[1], chartColors[2]],
                borderColor: chartBorderColors,
                borderWidth: 1
            }]
        };

        const keywordImprovementConfig = {
            type: 'doughnut',
            data: keywordImprovementData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top', labels: { color: '#1E2A38' } },
                    title: { display: true, text: 'Keywords Reaching Top Ranks', color: '#1E2A38' },
                    tooltip: { callbacks: { label: (context) => {
                        let label = context.label || '';
                        if (label) label += ': ';
                        label += `${context.parsed}`;
                        return label;
                    }}}
                }
            }
        };

        if (keywordImprovementChart) keywordImprovementChart.destroy();
        keywordImprovementChart = new Chart(document.getElementById('keyword-improvement-chart'), keywordImprovementConfig);
    };

    // Function to update the summary tables
    const updateTables = (isUSD) => {
        const { financial, totalRevenue, totalSpend, seo, ltv, cac, social } = dashboardData;
        const currencySymbol = isUSD ? '$' : 'EGP ';
        const totalNetRevenue = totalRevenue - totalSpend;
        const overallROI = calculateROI(totalRevenue, totalSpend).toFixed(0);

        // --- 1. Update Quick Stats ---
        document.getElementById('quick-roi-val').textContent = `${overallROI}%`;

        // --- 2. Update Overall KPI Summary ---
        document.getElementById('kpi-total-revenue').textContent = formatCurrency(totalRevenue, isUSD);
        document.getElementById('kpi-overall-roi').textContent = `${overallROI}%`;
        document.getElementById('kpi-ltv').textContent = formatCurrency(ltv, isUSD);
        document.getElementById('kpi-cac').textContent = formatCurrency(cac, isUSD);


        // --- 3. Update Financial Summary Table ---
        document.querySelectorAll('#summary-table tbody tr').forEach((row, index) => {
            let rev, spend;
            
            if (index === 0) { rev = financial.metaRevenue; spend = financial.metaSpend; }
            else if (index === 1) { rev = financial.loyaltyRevenue; spend = financial.loyaltySpend; }
            else if (index === 2) { rev = 0; spend = financial.otherSpend; } // Content/SEO Overheads

            if (index < 3) {
                const netProfit = rev - spend;
                const roi = calculateROI(rev, spend).toFixed(0);

                const revCell = row.querySelector('.revenue-cell');
                const spendCell = row.querySelector('.spend-cell');
                const profitCell = row.querySelector('.profit-cell');
                const roiCell = row.querySelector('.roi-cell');
                
                if (revCell && spendCell && profitCell && roiCell) {
                    const convertedRev = isUSD ? rev : rev * dashboardData.EGP_RATE;
                    const convertedSpend = isUSD ? spend : spend * dashboardData.EGP_RATE;
                    const convertedProfit = isUSD ? netProfit : netProfit * dashboardData.EGP_RATE;

                    revCell.textContent = formatCurrency(rev, isUSD);
                    spendCell.textContent = formatCurrency(spend, isUSD);
                    
                    const profitText = convertedProfit >= 0 ? formatCurrency(netProfit, isUSD) : `(${formatCurrency(netProfit * -1, isUSD)})`;
                    profitCell.textContent = profitText;
                    roiCell.textContent = `${roi}%`;
                }
            }
        });

        // Update overall total row
        document.getElementById('total-revenue').textContent = formatCurrency(totalRevenue, isUSD);
        document.getElementById('total-spend').textContent = formatCurrency(totalSpend, isUSD);
        document.getElementById('total-net-revenue').textContent = formatCurrency(totalNetRevenue, isUSD);
        document.getElementById('overall-roi').textContent = `${overallROI}%`;


        // --- 4. Populate SEO Keyword Table ---
        const seoTbody = document.querySelector('#seo-performance tbody');
        seoTbody.innerHTML = ''; // Clear previous content

        seo.keywordData.forEach(item => {
            const row = seoTbody.insertRow();
            
            row.insertCell().textContent = item.keyword;
            row.insertCell().textContent = item.volume.toLocaleString();
            row.cells[1].classList.add('volume');
            row.cells[1].setAttribute('data-sort-value', item.volume);
            
            const prePos = item.pre === 999 ? 'N/A' : item.pre;
            const postPos = item.post === 999 ? 'N/A' : item.post;
            
            row.insertCell().textContent = prePos;
            row.cells[2].setAttribute('data-sort-value', item.pre);
            
            row.insertCell().textContent = postPos;
            row.cells[3].classList.add('pos');
            row.cells[3].setAttribute('data-sort-value', item.post);

            const changeText = item.change === 998 ? 'N/A (New)' : `${item.change > 0 ? '+' : ''}${item.change}`;
            row.insertCell().textContent = changeText;
            row.cells[4].setAttribute('data-sort-value', item.change === 998 ? 999 : item.change);
            
            row.insertCell().textContent = `${item.trafficShare}%`;
            row.cells[5].setAttribute('data-sort-value', item.trafficShare);
        });
        
        // --- 5. Update SEO Traffic & Revenue Table ---
        document.getElementById('seo-rev-val').textContent = formatCurrency(seo.organicRevenue, isUSD);
        document.getElementById('seo-value-val').textContent = formatCurrency(seo.organicValue, isUSD);


        // --- 6. Populate Social Breakdown Table ---
        const socialTbody = document.getElementById('social-breakdown-body');
        socialTbody.innerHTML = '';
        social.platformPerformance.forEach(item => {
            const row = socialTbody.insertRow();
            row.insertCell().textContent = item.platform;
            row.insertCell().textContent = item.impressions.toLocaleString();
            row.insertCell().textContent = item.engagement.toLocaleString();
            row.insertCell().textContent = `${item.ctr}%`;
            row.cells[4].textContent = formatCurrency(item.cpm, isUSD);
            row.cells[5].textContent = item.acquisitions.toLocaleString();
            row.cells[5].classList.add('kpi-val');
        });
    };


    // Main function to handle updates across the dashboard
    const updateDashboard = (isUSD) => {
        updateTables(isUSD);
        renderCharts(isUSD);
    }

    // SCROLL ANIMATION LOGIC (Refined for smoothness and visibility)
    const fadeElements = document.querySelectorAll('.fade-section, .tile, .stat, .email-card, .social-card');

    const checkVisibility = () => {
        const triggerBottom = window.innerHeight * 0.9;
        const triggerTop = window.innerHeight * 0.1;
        
        let inviewCount = 0; 

        fadeElements.forEach(el => {
            const elTop = el.getBoundingClientRect().top;
            const elBottom = el.getBoundingClientRect().bottom;

            if (elTop < triggerBottom && elBottom > triggerTop) {
                const parent = el.closest('.gallery, .email-card-group, .social-card-group');
                if (parent && !el.classList.contains('inview')) {
                    el.style.transitionDelay = `${inviewCount * 100}ms`; 
                    inviewCount++;
                } else if (!parent) {
                    el.style.transitionDelay = '0ms';
                }
                
                el.classList.add('inview');

            } 
        });
    };
    
    // UX: Back to Top Button Logic
    const backToTopBtn = document.getElementById('backToTopBtn');
    const toggleBackToTop = () => {
        if (window.scrollY > 300) {
            backToTopBtn.style.display = 'flex';
        } else {
            backToTopBtn.style.display = 'none';
        }
    };

    backToTopBtn.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    // UX: SEO Table Sorting Logic
    const initTableSorting = () => {
        const table = document.getElementById('seo-performance');
        if (!table) return;

        const headers = table.querySelectorAll('th.sortable');
        const tbody = table.querySelector('tbody');

        headers.forEach((header, index) => {
            header.addEventListener('click', () => {
                const sortType = header.getAttribute('data-sort-type') || 'string';
                const currentDirection = header.classList.contains('sorted-asc') ? 'desc' : (header.classList.contains('sorted-desc') ? 'asc' : 'desc');

                // Clear existing sort classes
                headers.forEach(h => {
                    h.classList.remove('sorted-asc', 'sorted-desc');
                    h.querySelector('.sort-icon').className = 'fas fa-sort sort-icon';
                });

                // Set new sort direction
                const newDirection = (currentDirection === 'desc' ? 'asc' : 'desc');
                header.classList.add(newDirection === 'asc' ? 'sorted-asc' : 'sorted-desc');
                header.querySelector('.sort-icon').className = `fas fa-sort-${newDirection} sort-icon`;


                const rows = Array.from(tbody.querySelectorAll('tr'));

                rows.sort((rowA, rowB) => {
                    let cellA, cellB;
                    
                    // Prioritize data-sort-value if available
                    const dataA = rowA.cells[index].getAttribute('data-sort-value');
                    const dataB = rowB.cells[index].getAttribute('data-sort-value');

                    if (dataA !== null && dataB !== null) {
                        cellA = dataA;
                        cellB = dataB;
                    } else {
                        cellA = rowA.cells[index].textContent.trim().replace(/[,+%]/g, '');
                        cellB = rowB.cells[index].textContent.trim().replace(/[,+%]/g, '');
                    }

                    let comparison = 0;

                    if (sortType === 'number') {
                        comparison = parseFloat(cellA) - parseFloat(cellB);
                    } else { // string
                        comparison = cellA.localeCompare(cellB);
                    }

                    return newDirection === 'asc' ? comparison : comparison * -1;
                });

                // Re-append sorted rows
                rows.forEach(row => tbody.appendChild(row));
            });
        });
    };


    // INTRO OVERLAY LOGIC
    const introOverlay = document.getElementById('intro-overlay');
    const pageBody = document.body;

    // Use a timeout to ensure the fade-in animation runs before removing the overlay
    setTimeout(() => {
        // Start fading out the overlay
        introOverlay.style.opacity = '0';
        introOverlay.style.transition = 'opacity 700ms ease-out';

        // Wait for fade-out to complete, then remove the element
        setTimeout(() => {
            if (introOverlay.parentNode) {
                introOverlay.parentNode.removeChild(introOverlay);
            }
            pageBody.classList.remove('intro-active');
        }, 700); // Wait for the transition time

        // Re-enable scroll and navigation
        pageBody.style.overflow = '';
        pageBody.style.pointerEvents = '';

        // Run visibility check once fade is removed
        checkVisibility();
    }, 2500); // 2.5 seconds delay for cinematic effect

    // EVENT LISTENERS
    window.addEventListener('scroll', checkVisibility);
    window.addEventListener('resize', checkVisibility); 
    window.addEventListener('scroll', toggleBackToTop);

    // Initial load: setup dashboard and check initial visibility
    document.addEventListener('DOMContentLoaded', () => {
        // Disable scroll and pointers until intro ends
        pageBody.classList.add('intro-active');
        pageBody.style.overflow = 'hidden';
        pageBody.style.pointerEvents = 'none';

        // Initial load: calculate and display everything in USD
        updateDashboard(true);
        initTableSorting();
        
        // Check visibility on DOM load
        checkVisibility();
        toggleBackToTop();

        // Currency toggle
        document.querySelectorAll('#full-dashboard input[name="currency"]').forEach(radio => {
            radio.addEventListener('change', e => {
                const isUSD = e.target.value === 'USD';
                updateDashboard(isUSD);
            });
        });
    });
</script>
</body>
</html>
