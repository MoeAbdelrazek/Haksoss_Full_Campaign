<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Haksoss Café — The Ultimate Luxury Morning Experience Campaign (Case Study)</title>

<meta name="description" content="Wake up to luxury with Haksoss Café. Savor our signature Hero Latte, fresh Chocolate Croissants, and seasonal treats. Premium breakfast by the sea, loyalty rewards, and elegant mornings await."/>
<meta name="keywords" content="Haksoss, Luxury café, Alexandria coffee, Hero Latte, Chocolate Croissant, loyalty program, premium breakfast">
<meta property="og:title" content="Haksoss Café — The Ultimate Luxury Morning Experience Campaign (Case Study)">
<meta property="og:description" content="Wake up to luxury with Haksoss Café. Savor our signature Hero Latte, fresh Chocolate Croissants, and seasonal treats.">
<meta property="og:image" content="3_Assets/Images/hero-latte.jpg">
<meta property="og:type" content="website">
<meta property="og:url" content="https://moeabdelrazek.github.io/">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Haksoss Café — The Ultimate Luxury Morning Experience">
<meta name="twitter:description" content="Wake up to luxury with Haksoss Café.">
<meta name="twitter:image" content="3_Assets/Images/hero-latte.jpg">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD/2j/JcW8C1c7N+4B2bX8T8bF+x8Z8B/z/d7mXwYF6V8G5S2P8V7O8F5U9O4F8A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">

<style>
/* ============================================
1. GLOBAL STYLES & LUXURY DARK/NEUTRAL THEME (Overrides)
============================================
*/
:root {
    /* New Dark/Glassmorphism Theme Colors */
    --color-primary: #1e2124;    /* Deep Charcoal/Dark Mode Background */
    --color-secondary: #f0c38c;  /* Soft Gold/Caramel Accent for CTAs and Highlights */
    --color-text: #e0e0e0;       /* Light Gray for Body Text */
    --color-heading: #ffffff;    /* Pure White for Headlines */
    --font-heading: 'Georgia', serif; 
    --font-body: 'Helvetica Neue', sans-serif;
    --maxw:1200px;
    --radius:10px;

    /* Theme Variable Overrides for Existing CSS */
    --deep: var(--color-heading); 
    --blue: var(--color-secondary); 
    --muted: var(--color-text); 
    --accent: var(--color-secondary); 
    --bg-start: var(--color-primary); 
    --bg-end: var(--color-primary); 
    
    /* Glassmorphism Card Properties */
    --card: rgba(46, 51, 56, 0.4); 
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.2); 
    --section-border: 1px solid rgba(240, 195, 140, 0.3); /* Soft Gold Line */
    
    /* Ensure borders are light for dark background */
    --fancy-border-outer: 1px solid var(--color-text); 
    --fancy-border-inner: 0;
}

/* Reset and Body Overrides */
*{box-sizing:border-box}
body{
    margin:0;
    font-family: var(--font-body), system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color:var(--color-text); /* Use new light text color */
    padding: 0;
    border: var(--fancy-border-outer);
    border-radius: 0;
    position: relative;
    /* DARK MODE BACKGROUND */
    background:var(--color-primary) !important;
    -webkit-font-smoothing:antialiased;
    min-height: 100vh;

    /* Page fade-in */
    opacity: 0;
    animation: bodyFadeIn 900ms ease forwards;
}

/* Ensure all text elements use the new luxury typography */
h1, h2, h3, h4 {
    font-family: var(--font-heading);
    color: var(--color-heading);
    font-weight: 700;
}

@keyframes bodyFadeIn {
    to { opacity: 1; }
}

a{ color:var(--blue); text-decoration:none; transition:color .3s; }
a:hover { color:var(--accent); }

/* Layout */
.wrap{ max-width:var(--maxw); margin:0 auto; padding:20px 20px 40px; }
/* HEADER MODIFICATION (Minimalist) */
header.fixed-header{
    position:fixed; left:0; right:0; top:0; z-index:9999;
    background:var(--color-primary); /* Dark header */
    color:var(--color-heading);
    box-shadow:0 4px 15px rgba(0,0,0,0.4);
}
.header-inner{
    max-width:var(--maxw); margin:0 auto; display:flex; align-items:center;
    justify-content: flex-start;
    padding:10px 20px; gap:16px;
}
.brand{ display:flex; gap:12px; align-items:center; }
.brand img{ width:48px; height:48px; object-fit:cover; border-radius:8px; background:var(--color-heading); padding:4px; border: 1px solid var(--accent); }
.brand h1{ margin:0; font-family:var(--font-heading), serif; font-size:1.6rem; color: var(--accent); }
.brand p, nav.topnav { display:none; }

/* page content wrapper to offset fixed header */
.page { padding-top:80px; }

/* Panels (GLASSMORPHISM EFFECT) */
.panel{
    background:var(--card); /* Glass background */
    border-radius:var(--radius);
    padding:35px;
    margin-bottom:40px;
    
    /* Elegant Shadow/Border */
    box-shadow:0 0 0 1px rgba(255, 255, 255, 0.05), var(--glass-shadow);
    backdrop-filter: blur(8px); 
    -webkit-backdrop-filter: blur(8px);
    
    /* SMOOTHER ANIMATION */
    opacity:0;
    transform:translateY(25px);
    transition:all 0.9s cubic-bezier(.2,.9,.3,1.1);
    border-bottom: var(--section-border);
}
.panel:last-child {
    border-bottom: var(--section-border);
    margin-bottom: 40px;
}
.panel.inview{
    opacity:1;
    transform:translateY(0);
}
.panel h2 {
    color: var(--color-heading); /* White heading */
    font-family: var(--font-heading), serif;
    font-size: 2rem;
    border-bottom: 2px solid var(--accent); /* Soft Gold Line */
    padding-bottom: 10px;
}
.panel p {
    color: var(--color-text);
}

/* CASE STUDY (lead) */
.case-hero{ display:flex; gap:30px; align-items:start; }
.case-left h2{ margin:0 0 10px; font-size:2.2rem; }
.quick-stats{ display:flex; gap:16px; flex-wrap:wrap; margin:16px 0; }
/* ANIMATION: Quick Stats (GLASSMORPHISM LIFT) */
.stat{
    background: rgba(46, 51, 56, 0.6); /* Darker glass background */
    padding:15px 20px;
    border-radius:12px;
    min-width:160px;
    box-shadow:0 8px 20px rgba(0,0,0,0.3);
    transition:transform .4s ease-out, box-shadow .4s;
    border: 1px solid var(--accent); /* Gold border */
}
.stat:hover{
    transform:translateY(-4px); /* Subtle lift */
    box-shadow:0 12px 30px rgba(0,0,0,0.5);
}
.stat .val{ color:var(--accent); font-weight:900; font-size:1.8rem; }
.stat .lab{ color:var(--color-text); font-size:1rem; margin-top:4px; font-weight: 700; }

.case-right{ width:450px; max-width:40%; position:relative; }
/* ANIMATION: Hero Image (Smooth Float) */
.case-right img{
    width:100%;
    border-radius:16px;
    box-shadow:0 20px 50px rgba(0,0,0,0.3);
    transition:all 1s cubic-bezier(.2,.9,.3,1);
    animation: floating-shadow 6s ease-in-out infinite alternate;
    border: 3px solid var(--accent);
}

@keyframes floating-shadow {
    0% { transform: translateY(-8px); box-shadow: 0 15px 40px rgba(240, 195, 140, 0.2); }
    100% { transform: translateY(-12px); box-shadow: 0 25px 60px rgba(240, 195, 140, 0.4); }
}


/* gallery */
.gallery{ display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:18px; margin-top:20px; }
.tile{
    background: rgba(46, 51, 56, 0.8); /* Darker tile background */
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 10px 30px rgba(0,0,0,0.5);
    position:relative;
    transition:transform .5s ease-out, box-shadow .5s;
}
/* ANIMATION: Tile Hover (Elegant) */
.tile:hover{
    transform:translateY(-5px) scale(1.02);
    box-shadow:0 15px 40px rgba(0,0,0,0.8);
}
.tile img{ width:100%; height:180px; object-fit:cover; display:block; }
.tile .meta{ padding:12px; font-weight:800; color:var(--accent); background:rgba(46, 51, 56, 0.9); }

/* tables (DARK MODE OVERRIDES) */
.table-wrap{ 
    overflow:auto; 
    margin-top:20px; 
    /* Glassmorphism for table wrapper */
    background: rgba(46, 51, 56, 0.4); 
    border-radius: 12px;
    backdrop-filter: blur(8px); 
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.05);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    padding: 15px;
}
.table-wrap table {
    width:100%; 
    border-collapse:collapse; 
    font-size:1rem; 
    background: transparent; /* Ensure table background is transparent */
}
th, td{ 
    padding:15px 12px; 
    border-bottom:1px solid rgba(255, 255, 255, 0.1); 
    text-align:left; 
    vertical-align:top; 
    color: var(--color-text);
}
th{ 
    background: transparent !important; 
    color:var(--accent); 
    font-weight:800; 
    text-transform: uppercase; 
    border-bottom: 2px solid var(--accent) !important; 
}
tbody tr:nth-child(even) {
    background-color: rgba(255, 255, 255, 0.03); /* Stripe effect */
}
td:nth-child(3) { font-weight: 700; color: var(--blue); }

/* AI Table specific styling */
#ai-metrics .num {
    color: var(--accent);
    font-size: 1.1rem;
    font-weight: 800;
}
#advanced-strategy h2 { color: var(--blue); }

/* Chart size adjustment */
.charts{ display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-top:20px; }
.chart.card{ 
    /* Glassmorphism for Chart Cards */
    padding:20px; 
    background: rgba(46, 51, 56, 0.6) !important;
    border-radius: var(--radius); 
    border: 1px solid rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(8px); 
    -webkit-backdrop-filter: blur(8px);
    box-shadow:0 8px 20px rgba(0, 0, 0, 0.3); 
}
.chart.card h4 {
    color: var(--color-heading) !important;
}

/* Professional List Styling */
.professional-list {
    list-style: none;
    padding-left: 0;
    margin-top: 15px;
}
.professional-list li {
    position: relative;
    padding-left: 25px;
    margin-bottom: 12px;
    line-height: 1.6;
    color: var(--color-text); /* Use new light text color */
}
.professional-list li:before {
    content: "▪"; 
    position: absolute;
    left: 0;
    color: var(--accent); /* Use accent color for bullets */
    font-size: 1.2rem;
    top: 0;
}

/* FOOTER STYLES (DARK MODE) */
footer{
    padding: 30px 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    background: var(--color-primary); /* Dark footer */
    color: var(--color-text);
    text-align: center;
}
.footer-wrap{
    max-width: var(--maxw);
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 15px;
    align-items: center;
    font-size: 0.9rem;
    font-weight: 600;
}
.footer-info{
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
}

/* PROFESSIONAL NAME FORMAT - signature */
.author-name strong {
    color: var(--color-text);
    font-weight: 800;
    font-size: 1.1em;
    letter-spacing: 0.5px;
    display: inline-block;
}

/* Footer links & signature adjustments */
.footer-links{
    display: flex;
    gap: 25px;
    margin-top: 10px;
}
.footer-links a{
    color: var(--color-text); /* Light icons */
    font-size: 1.6rem; 
    transition: color 0.3s, transform 0.3s;
}
.footer-links a:hover{
    color: var(--accent); /* Hover effect using accent color */
    transform: scale(1.15);
}
.footer-meta {
    font-size: 0.85rem;
    color: var(--muted);
}
.footer-meta .divider{
    color: var(--accent);
    margin: 0 8px;
    font-weight: 400;
}

/* Mobile Optimizations */
@media (max-width: 768px) {
    .case-hero {
        flex-direction: column;
        gap: 20px;
    }
    .case-right{
        width: 100%;
        max-width: 100%;
    }
    .panel {
        padding: 25px 20px;
    }
    .footer-wrap {
        flex-direction: column;
        gap: 10px;
    }
    .footer-meta {
        flex-direction: column;
        gap: 5px;
    }
    .footer-meta .divider {
        display: none; /* Hide vertical dividers on mobile stack */
    }
    .footer-info {
        gap: 8px;
    }
}

/* DESKTOP FOOTER LAYOUT */
@media (min-width: 768px) {
    .footer-wrap {
        flex-direction: row; 
        justify-content: space-between;
    }
    .footer-info {
        flex-direction: row;
        align-items: center;
        gap: 20px;
    }
    .footer-links {
        margin-top: 0;
    }
    .footer-meta {
        text-align: right;
        display: flex;
        align-items: center;
        gap: 5px;
    }
}

/* =========================
    ADDITIONAL ANIMATIONS (Micro-interactions)
    ========================= */

/* Fade-in on-scroll helper - used by sections + tiles + stats */
.fade-section, .tile, .stat {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 800ms cubic-bezier(.2,.9,.3,1), transform 800ms cubic-bezier(.2,.9,.3,1);
}
.inview, .fade-section.visible, .tile.inview, .stat.inview {
    opacity: 1;
    transform: translateY(0);
}

/* Hero breathing */
.hero-breath {
    animation: heroPulse 8s ease-in-out infinite alternate;
}
@keyframes heroPulse {
    from { transform: translateY(0) scale(1); }
    to { transform: translateY(-6px) scale(1.02); }
}

/* Intro overlay (full-screen cinematic) */
#intro-overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-primary); /* Dark mode intro */
    color: var(--accent);
    z-index: 99999;
    pointer-events: auto;
}
.intro-card {
    text-align:center;
    opacity: 0;
    transform: translateY(10px);
    animation: introIn 1400ms ease forwards;
}
@keyframes introIn {
    to { opacity: 1; transform: translateY(0); }
}
.intro-title {
    font-family: 'Great Vibes', cursive;
    font-size: 68px;
    color: var(--accent);
    margin: 0;
    letter-spacing: 1px;
}
.intro-tagline {
    font-family: 'Poppins', sans-serif;
    color: var(--color-heading); /* White tagline */
    margin-top: 6px;
    letter-spacing: 2px;
}

/* music control (MICRO-INTERACTION) */
#music-control {
    position: fixed;
    right: 24px;
    bottom: 26px;
    z-index: 99999;
    background: var(--accent);
    color: var(--color-primary); /* Dark text on gold button */
    border: none;
    padding: 12px 25px; /* Slightly larger padding */
    border-radius: 999px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    cursor: pointer;
    font-weight: 700;
    
    /* Performance Micro-Interaction */
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s ease-in-out;
    will-change: transform, box-shadow;
}
#music-control:hover { 
    transform: translateY(-3px) scale(1.02); 
    box-shadow: 0 10px 15px rgba(0, 0, 0, 0.5); 
}
#music-control:active {
    transform: translateY(0) scale(1.0); 
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
}

/* signature footer style override (Great Vibes) */
.signature {
    font-family: 'Great Vibes', cursive;
    font-size: 32px;
    color: var(--accent);
    margin: 0;
    transition: transform .25s ease;
}
.signature:hover { transform: scale(1.04); text-shadow: 0 0 10px rgba(240, 195, 140, 0.6); }

/* small adjustments for charts and containers inside panels (preserve original layout) */
.charts { margin-top: 20px; }
.panel .chart { margin-top: 10px; }

/* ensure high z for header while intro is active */
body.intro-active header.fixed-header { z-index: 100000; pointer-events: none; }

/* accessibility focus */
a:focus, button:focus { outline: 3px solid rgba(240, 195, 140, 0.25); outline-offset: 3px; }

/* =======================================
    DASHBOARD OVERRIDES (for integration)
    ======================================= */
/* Scoping styles to the new dashboard section */
#full-dashboard {
    /* Use main file's panel styling */
}
#full-dashboard table {
    border: none; 
    margin-bottom: 20px;
}
#full-dashboard th, #full-dashboard td {
    border: 1px solid rgba(255, 255, 255, 0.1); 
    padding: 10px;
    text-align: center;
}
#full-dashboard th {
    background: rgba(46, 51, 56, 0.8);
    color: var(--color-heading);
}
#full-dashboard canvas {
    max-width: 100%;
    margin-bottom: 30px;
}
.dashboard-section { margin-bottom: 30px; }

/* ACCESSIBILITY: Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    * {
        transition: none !important;
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        scroll-behavior: auto !important;
    }
}
</style>
</head>
<body>
<div id="intro-overlay" aria-hidden="true" style="display:none">
  <div class="intro-card" role="dialog" aria-label="Haksoss introduction">
    <h1 class="intro-title">Haksoss Café</h1>
    <p class="intro-tagline">A Morning Beyond Ordinary</p>
  </div>
</div>

<audio id="bg-music" loop preload="auto" style="display:none">
    <source src="3_Assets/Music/haksoss-bg.mp3" type="audio/mpeg">
</audio>
<button id="music-control" aria-pressed="false" title="Play background music">Play Music</button>

<header class="fixed-header" role="banner">
  <div class="header-inner">
    <div class="brand">
      <img src="3_Assets/Logo/logo.png" alt="Haksoss café logo">
      <div>
        <h1 class="site-title">Haksoss — Luxury Morning Experience Campaign</h1>
      </div>
    </div>
  </div>
</header>

<div class="page">
<div class="wrap">

<section id="case" class="panel inview">
<div class="case-hero">
<div class="case-left">
<h2>Haksoss Café — Elevate Your Mornings: Full Case Study</h2>
<p class="sub">Campaign Title: **“Wake Up with Luxury in Alexandria”**<br>
Purpose: Establish Haksoss as Alexandria’s premium morning destination through bilingual, sensory storytelling, high-end visuals, and a loyalty-led conversion strategy.</p>

<div class="quick-stats">
<div class="stat"><div class="val">80,800</div><div class="lab">Total Reach</div></div>
<div class="stat"><div class="val">1,070</div><div class="lab">Loyalty Sign-ups</div></div>
<div class="stat"><div class="val">11.3%</div><div class="lab">Avg Engagement Rate</div></div>
<div class="stat"><div class="val">411%</div><div class="lab">Overall Campaign ROI</div></div>
</div>

<div style="margin-top:20px;">
<h3 style="margin-bottom:8px">Executive Summary</h3>
<p class="muted">Haksoss Café executed a visual-first, bilingual campaign centered on the signature **Hero Latte** and **Chocolate Croissant**. The strategy integrated targeted ads across Meta and TikTok with a loyalty-driven email automation sequence, resulting in a measurable lift in morning footfall and a high return on investment.</p>
</div>
</div>

<div class="case-right">
<img src="3_Assets/Images/hero-latte.jpg" alt="Hero Latte coffee by the sea at Haksoss Café">
</div>
</div>
</section>

<section id="creative" class="panel fade-section">
<h2>Creative Execution & Visual Assets (Photo Gallery)</h2>
<p class="muted">All campaign visuals and templates used across posts, stories, and ads—optimized for morning light and high-end aesthetic.</p>

<div class="gallery" aria-hidden>
<div class="tile"><img src="3_Assets/Images/hero-latte.jpg" alt="Hero Latte coffee"><div class="meta">hero-latte.jpg</div></div>
<div class="tile"><img src="3_Assets/Images/chocolate-croissant.jpg" alt="Freshly baked chocolate croissant"><div class="meta">chocolate-croissant.jpg</div></div>
<div class="tile"><img src="3_Assets/Images/seasonal-treat.jpg" alt="Seasonal breakfast treat"><div class="meta">seasonal-treat.jpg</div></div>
<div class="tile"><img src="3_Assets/Images/special-latte.jpg" alt="Special latte creation"><div class="meta">special-latte.jpg</div></div>
<div class="tile"><img src="3_Assets/Images/special-offer.jpg" alt="Special offer on lattes"><div class="meta">special-offer.jpg</div></div>
<div class="tile"><img src="3_Assets/Images/loyalty-program.jpg" alt="Haksoss Loyalty Program benefits"><div class="meta">loyalty-program.jpg</div></div>

<div class="tile"><img src="3_Assets/1_Templates/hero_latte_post.png" alt="Hero Latte social media template"><div class="meta">hero_latte_post.png (template)</div></div>
<div class="tile"><img src="3_Assets/1_Templates/special_latte.png" alt="Special latte social media template"><div class="meta">special_latte.png (template)</div></div>
<div class="tile"><img src="3_Assets/1_Templates/season_offer.png" alt="Seasonal offer social media template"><div class="meta">season_offer.png (template)</div></div>
<div class="tile"><img src="3_Assets/1_Templates/haksoss_post.png" alt="Haksoss brand post template"><div class="meta">haksoss_post.png (template)</div></div>
<div class="tile"><img src="3_Assets/1_Templates/discover_more.png" alt="Discover more carousel template"><div class="meta">discover_more.png (template)</div></div>
</div>
</section>

<section id="emails" class="panel fade-section">
<h2>Emails — Full List (English & Arabic)</h2>
<p class="muted">Copy-ready email content used in the campaign, optimized for open rate and intent. All 12 email copies are provided.</p>

<div class="table-wrap">
<table>
<thead>
<tr><th>Email</th><th>Language</th><th>Subject / Short</th><th>Full Copy</th></tr>
</thead>
<tbody>
<tr><td>Morning Awakening</td><td>English</td><td>Wake up with the perfect cup (includes keyword: morning)</td><td>Wake up with the perfect cup and embrace the serenity of Alexandria’s beach mornings. Haksoss brings luxury and flavor together.</td></tr>
<tr><td>Signature Indulgence</td><td>English</td><td>Mornings deserve indulgence (sensory appeal)</td><td>At Haksoss, we believe that mornings deserve moments of pure indulgence. Let us take you on a journey of taste, aroma, and elegance.<br>• **Hero Latte**: Velvety, aromatic, perfect balance.<br>• **Chocolate Croissant**: Layers of buttery pastry with rich chocolate.<br>• Seasonal Treats: Fresh ingredients capturing every season.</td></tr>
<tr><td>Exclusive Offer</td><td>English</td><td>Limited-time morning upgrade</td><td>Delight in our limited-time offer to elevate your mornings.<br>• Hero Latte Experience: Complimentary upgrade with any latte.<br>• Chocolate Croissant Delight: Second croissant 50% off.</td></tr>
<tr><td>Loyalty Invitation</td><td>English</td><td>Join Haksoss Loyalty</td><td>Elevate your mornings with Haksoss Loyalty.<br>• Points on Every Purchase: Earn rewards.<br>• Early Access: Discover new offerings first.<br>• Exclusive Events: Private tastings, workshops, beach gatherings.</td></tr>
<tr><td>Haksoss Spotlight</td><td>English</td><td>Why guests love Haksoss</td><td>Discover why guests choose Haksoss to start their day.<br>"The Hero Latte is perfection in a cup." – Sarah A.</td></tr>
<tr><td>Final Sunrise Reminder</td><td>English</td><td>Don’t miss the morning elegance</td><td>Don’t miss the chance to experience elegance, flavor, and luxury.<br>• Loyalty Rewards: Join today for benefits.</td></tr>
<tr><td>صباح مشرق</td><td>Arabic</td><td>ابدأ صباحك مع الكوب المثالي</td><td>ابدأ صباحك مع الكوب المثالي واستمتع بهدوء شواطئ الإسكندرية. هكسوس يجمع بين الفخامة والنكهات.</td></tr>
<tr><td>المتعة المميزة</td><td>Arabic</td><td>الصباح يستحق الترف</td><td>في هكسوس، نؤمن أن الصباح يستحق لحظات من الترف الخالص.<br>• لاتيه هيرو: كريمي وعطري، وتوازن مثالي من النكهات.</td></tr>
<tr><td>عرض حصري</td><td>Arabic</td><td>استمتع بعرضنا المحدود</td><td>استمتع بعرضنا المحدود لترقية صباحك.<br>• تجربة لاتيه هيرو: ترقية مجانية مع أي لاتيه.<br>• متعة كرواسون الشوكولاتة: كرواسون ثانٍ بخصم 50%.</td></tr>
<tr><td>دعوة للانضمام لبرنامج الولاء</td><td>Arabic</td><td>انضم لبرنامج الولاء</td><td>ارتقِ بصباحك مع برنامج ولاء هكسوس.<br>• نقاط مع كل عملية شراء: اكسب مكافآت.</td></tr>
<tr><td>أضواء هكسوس</td><td>Arabic</td><td>لماذا يختار الضيوف هكسوس</td><td>اكتشف لماذا يختار الضيوف هكسوس لبدء يومهم — شهادات الضيوف وتجاربهم.</td></tr>
<tr><td>تذكير شروق الشمس النهائي</td><td>Arabic</td><td>لا تفوت تجربة الأناقة</td><td>لا تفوت الفرصة لتجربة الأناقة والنكهات والفخامة — اشترك في برنامج الولاء الآن.</td></tr>
</tbody>
</table>
</div>
</section>

<section id="ai-usage" class="panel fade-section">
<h2>Algorithmic Intelligence and Predictive Modeling</h2>
<p class="muted">The campaign's superior performance was driven by a proprietary **Machine Learning Model** used for Dynamic Creative Optimization (DCO) and resource allocation, ensuring maximum efficiency.</p>

<div class="table-wrap" id="ai-metrics">
<h3 style="margin-top:20px; margin-bottom:10px; color:var(--deep);">AI Performance Metrics (Comparison to Standard Bidding)</h3>
<table>
<thead>
<tr><th>Metric</th><th>Standard Bidding</th><th>AI/ML Optimization</th><th>Improvement</th></tr>
</thead>
<tbody>
<tr><td>**Average CTR (Reach)**</td><td>4.8%</td><td><span class="num">6.5%</span></td><td>**+35%**</td></tr>
<tr><td>**Cost Per Loyalty Sign-up (CAC)**</td><td>$3.90</td><td><span class="num">$2.65</span></td><td>**-32%**</td></tr>
<tr><td>**Predicted LTV of New Users**</td><td>$45.00</td><td><span class="num">$68.20</span></td><td>**+51%**</td></tr>
</tbody>
</table>
</div>
</section>

<section id="seo-analysis" class="panel fade-section">
<h2>SEO & Search Engine Strategy (The Three Pillars of Organic Growth)</h2>
<p class="muted">The foundation of the digital growth campaign rested on a robust, three-pillar SEO strategy—**Technical, On-Page, and Off-Page**—designed to capture high-intent local and product searches and establish Haksoss as the regional authority.</p>

<div style="margin-top:20px;">
<h3 style="margin-bottom:10px;">Pillar 1: Technical SEO & Site Health</h3>
<div class="table-wrap">
    <table>
        <thead>
            <tr><th>Metric</th><th>Before Campaign</th><th>After Campaign Launch</th><th>Impact</th></tr>
        </thead>
        <tbody>
            <tr><td>Core Web Vitals (LCP)</td><td>3.8s (Poor)</td><td><span style="color:#2ecc71; font-weight:800;">1.9s (Good)</span></td><td>-50% Load Time Reduction</td></tr>
            <tr><td>Mobile Friendliness</td><td>80% Pass</td><td><span style="color:#2ecc71; font-weight:800;">100% Pass</span></td><td>Full Indexing Compliance</td></tr>
            <tr><td>Crawl Budget Utilization</td><td>65%</td><td><span style="color:#2ecc71; font-weight:800;">95%</span></td><td>Faster Content Discovery</td></tr>
            <tr><td>Schema Markup Status</td><td>Basic</td><td><span style="color:#2ecc71; font-weight:800;">LocalBusiness & Product</span></td><td>Enhanced SERP Features (Reviews, Pricing)</td></tr>
        </tbody>
    </table>
</div>
</div>

<div style="margin-top:30px;">
<h3 style="margin-bottom:8px;">Pillar 2: On-Page Optimization & Keyword Targeting</h3>
<p class="muted">The content structure centered on a "Hub & Spoke" model, with the homepage as the main hub and product pages (Hero Latte, Seasonal Menu) as dedicated spokes, all optimized for Alexandria-specific traffic.</p>
<ul class="professional-list">
    <li>**High-Value Local Keywords:** Achieved Top 3 ranking for "Luxury coffee Alexandria" and "Best morning views café," driving **42%** of organic morning foot traffic.</li>
    <li>**Product Conversion Copy:** Implemented micro-copy adjustments (Title Tags, H2s) resulting in a **40% increase** in organic click-through rate (CTR) to high-value product pages.</li>
    <li>**Bilingual Hreflang Tags:** Explicitly defined English and Arabic versions of all content using `hreflang` tags to prevent duplicate content issues and ensure the correct regional user receives the appropriate language version.</li>
    <li>**Featured Snippets:** Optimized key headings and paragraphs to target "How to get a luxury breakfast in Alexandria," securing 3 new Featured Snippets.</li>
</ul>
</div>

<div style="margin-top:30px;">
<h3 style="margin-bottom:8px;">Pillar 3: Off-Page Strategy (Local Authority & E-E-A-T)</h3>
<ul class="professional-list">
    <li>**Google Business Profile (GBP) Optimization:** Secured **100+ new 5-star reviews** during the campaign period, directly improving the local search ranking factor, particularly in Google Maps' 3-pack.</li>
    <li>**Local Citations & NAP Consistency:** Ensured consistency of NAP (Name, Address, Phone) across 20+ high-authority Egyptian business and tourism directories to reinforce local relevance.</li>
    <li>**High-Domain Backlinks:** Acquired 5 editorial backlinks from influential local tourism and food blogs (average Domain Rating 45+), dramatically boosting the domain's authority score (DR).</li>
</ul>
</div>

<div class="table-wrap" id="bilingual-performance" style="margin-top:30px;">
<h3 style="margin-bottom:10px; color:var(--deep);">Bilingual Copy Performance Metrics (Email & Landing Page Synergy)</h3>
<table>
<thead>
<tr><th>Language</th><th>Average Open Rate</th><th>Average Click-Through Rate (CTR)</th><th>Conversions/1000 Opens</th></tr>
</thead>
<tbody>
<tr><td>**English**</td><td>43.0%</td><td>4.8%</td><td>35</td></tr>
<tr><td>**Arabic**</td><td>**43.8%**</td><td>**5.5%**</td><td>**42**</td></tr>
</tbody>
</table>
</div>
</section>

<section id="kpis" class="panel fade-section">
<h2>KPIs & Performance Dashboard (Summary Charts)</h2>
<p class="muted">A comprehensive view of campaign results, channel efficiency, and predictive customer modeling, illustrating the profitability and growth potential of the strategy.</p>

<div class="charts">
<div class="chart card"><h4 style="margin:0 0 8px; color:var(--deep)">Engagement Rate by Platform</h4><canvas id="engChart"></canvas></div>
<div class="chart card"><h4 style="margin:0 0 8px; color:var(--deep)">Ad Spend Distribution</h4><canvas id="spendPie"></canvas></div>
<div class="chart card"><h4 style="margin:0 0 8px; color:var(--deep)">Email Open Rate Trend</h4><canvas id="emailLine"></canvas></div>
<div class="chart card"><h4 style="margin:0 0 8px; color:var(--deep)">Customer Acquisition Cost (CAC) per Channel</h4><canvas id="cacChart"></canvas></div>
<div class="chart card"><h4 style="margin:0 0 8px; color:var(--deep)">Conversions by Channel</h4><canvas id="convBar"></canvas></div>
<div class="chart card"><h4 style="margin:0 0 8px; color:var(--deep)">LTV to CAC Ratio (Predictive)</h4><canvas id="ltvRatio"></canvas></div>
</div>

<div class="table-wrap" id="core-metrics" style="margin-top:30px;">
<h3 style="margin-bottom:10px; color:var(--deep);">Core Campaign Metrics Summary</h3>
<table>
<thead>
<tr><th>Metric</th><th>Result</th><th>Notes</th></tr>
</thead>
<tbody>
<tr><td>Total Reach</td><td>80,800</td><td>Combined social + ads + email</td></tr>
<tr><td>Total Conversions</td><td>1,070 loyalty sign-ups</td><td>Key Success Metric for repeat business</td></tr>
<tr><td>Average CAC (AI Optimized)</td><td>$2.65</td><td>32% reduction from standard bidding</td></tr>
<tr><td>Estimated Revenue</td><td>$9,050</td><td>High-impact campaign ROI (411%)</td></tr>
<tr><td>Avg. LTV Projection (90-Day)</td><td>$68.20</td><td>51% increase over prior average ($45.00)</td></tr>
</tbody>
</table>
</div>
</section>

<section id="full-dashboard" class="panel fade-section">

<h1>Haksoss Café — Full Financial Campaign Dashboard</h1>

<div class="dashboard-section">
<h2>Key Performance Indicators (KPIs)</h2>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr><td>Total Reach</td><td>120,000</td></tr>
<tr><td>Impressions</td><td>450,000</td></tr>
<tr><td>CTR</td><td>4.2%</td></tr>
<tr><td>Conversions</td><td>3,500</td></tr>
<tr><td>Conversion Rate</td><td>2.92%</td></tr>
<tr><td>Total Revenue</td><td id="total-revenue">$48,000 / EGP 1,728,000</td></tr>
<tr><td>Total Spend</td><td id="total-spend">$20,000 / EGP 720,000</td></tr>
<tr><td>Overall ROI</td><td id="overall-roi">140%</td></tr>
</tbody>
</table>
</div>

<div class="dashboard-section">
    <h2>Advanced KPIs (Predictive)</h2>
    <div class="table-wrap">
        <table id="advanced-kpi-table">
            <thead>
                <tr>
                    <th>Metric</th>
                    <th>Value (Current)</th>
                    <th>Benchmark (Goal)</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>Cost Per Acquisition (CAC)</td><td id="dashboard-cac">$5.71</td><td>$10.00</td></tr>
                <tr><td>Customer Lifetime Value (LTV)</td><td id="dashboard-ltv">$68.20</td><td>$45.00</td></tr>
                <tr><td>**LTV:CAC Ratio**</td><td id="dashboard-ltv-cac">11.9:1</td><td>3:1</td></tr>
            </tbody>
        </table>
    </div>
</div>

<div class="dashboard-section">
    <h2>Secondary KPI Visualization</h2>
    <div class="charts">
        <div class="chart card"><h4 style="margin:0 0 8px;">LTV vs. CAC Comparison</h4><canvas id="ltv-cac-chart"></canvas></div>
        <div class="chart card"><h4 style="margin:0 0 8px;">Conversions by Acquisition Channel</h4><canvas id="conversion-pie-chart"></canvas></div>
    </div>
</div>

<div class="dashboard-section">
<h2>Financial Table (USD / EGP)</h2>
<div class="currency-toggle">
<label><input type="radio" name="currency" value="USD" checked> USD</label>
<label><input type="radio" name="currency" value="EGP"> EGP</label>
</div>
<div class="table-wrap">
<table id="financial-table">
<thead>
<tr>
<th>Channel</th>
<th>Spend</th>
<th>Revenue</th>
<th>ROI</th>
</tr>
</thead>
<tbody>
<tr><td>Facebook Ads</td><td>$7,000</td><td>$15,000</td><td>114%</td></tr>
<tr><td>TikTok Campaign</td><td>$4,500</td><td>$12,000</td><td>167%</td></tr>
<tr><td>Email Marketing</td><td>$500</td><td>$4,000</td><td>700%</td></tr>
<tr><td>Organic/SEO</td><td>$8,000</td><td>$17,000</td><td>112.5%</td></tr>
</tbody>
</table>
</div>
</div>

<div class="dashboard-section">
<h2>Channel Performance & Insights</h2>
<div class="table-wrap">
<table id="insights-table">
<thead>
<tr>
<th>Channel</th>
<th>ROI %</th>
<th>Performance Rating</th>
</tr>
</thead>
<tbody>
<tr><td>Facebook Ads</td><td>114%</td><td>Excellent performance ✅</td></tr>
<tr><td>TikTok Campaign</td><td>167%</td><td>Exceptional performance 👑</td></tr>
<tr><td>Email Marketing</td><td>700%</td><td>Exceptional performance 👑</td></tr>
<tr><td>Organic/SEO</td><td>112.5%</td><td>Excellent performance ✅</td></tr>
</tbody>
</table>
</div>
</div>

<div class="dashboard-section">
<h2>Financial Dashboard Charts</h2>
<div class="charts">
<div class="chart card"><h4 style="margin:0 0 8px;">ROI by Channel (Comparison)</h4><canvas id="financial-roi-chart"></canvas></div>
<div class="chart card"><h4 style="margin:0 0 8px;">Spend vs. Revenue by Channel</h4><canvas id="financial-rev-spend-chart"></canvas></div>
</div>
</div>
</section>

</div>
</div>

<footer role="contentinfo">
  <div class="footer-wrap">
    <div class="footer-info">
      <p class="author-name">Campaign by <strong>Moe Abdelrazek</strong></p>
      <p class="signature">Haksoss Café</p>
    </div>
    <div class="footer-links">
      <a href="https://linkedin.com/in/moeabdelrazek" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
      <a href="https://github.com/moeabdelrazek" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
      <a href="mailto:contact@moeabdelrazek.com" title="Email"><i class="fas fa-envelope"></i></a>
    </div>
    <div class="footer-meta">
      <p>&copy; 2024 Moe Abdelrazek</p>
      <span class="divider">|</span>
      <p>Haksoss Café</p>
    </div>
  </div>
</footer>

<script>
// SCROLL-BASED INVIEW ANIMATIONS
const sections = document.querySelectorAll('.fade-section, .panel, .tile, .stat');

const observerOptions = {
  root: null,
  rootMargin: '0px',
  threshold: 0.1
};

const observer = new IntersectionObserver((entries, observer) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('inview');
      observer.unobserve(entry.target);
    }
  });
}, observerOptions);

sections.forEach(section => {
  observer.observe(section);
});

// BACKGROUND MUSIC PLAYER
const musicControl = document.getElementById('music-control');
const bgMusic = document.getElementById('bg-music');
const introOverlay = document.getElementById('intro-overlay');
let musicPlayed = false;

// Play music on any user interaction (to bypass browser autoplay restrictions)
document.addEventListener('click', startContent, { once: true });
document.addEventListener('touchstart', startContent, { once: true });

function startContent() {
  // Check if the intro overlay should be shown
  if (introOverlay) {
    introOverlay.style.display = 'flex';
    document.body.classList.add('intro-active');
    setTimeout(() => {
      introOverlay.style.opacity = 0;
      setTimeout(() => {
        introOverlay.style.display = 'none';
        document.body.classList.remove('intro-active');
      }, 800);
    }, 1800); // Display intro for 1.8s
  }

  if (!musicPlayed && bgMusic && bgMusic.src) {
    bgMusic.play().then(() => {
      musicControl.textContent = 'Pause Music';
      musicControl.setAttribute('aria-pressed', 'true');
      musicPlayed = true;
    }).catch(error => {
      console.log('Autoplay prevented or no music source:', error);
      musicControl.textContent = 'Play Music';
      musicControl.setAttribute('aria-pressed', 'false');
      musicPlayed = false;
    });
  }
}

if (musicControl) {
  musicControl.addEventListener('click', () => {
    if (bgMusic.paused) {
      bgMusic.play();
      musicControl.textContent = 'Pause Music';
      musicControl.setAttribute('aria-pressed', 'true');
    } else {
      bgMusic.pause();
      musicControl.textContent = 'Play Music';
      musicControl.setAttribute('aria-pressed', 'false');
    }
  });
}

// =======================================
// FINANCIAL DASHBOARD (Chart.js and Data)
// =======================================

// Exchange Rate (Approximate for example use)
const EGP_USD_RATE = 36; // 1 USD = 36 EGP

// Initial Data in USD
let financialData = [
  { channel: 'Facebook Ads', spend: 7000, revenue: 15000 },
  { channel: 'TikTok Campaign', spend: 4500, revenue: 12000 },
  { channel: 'Email Marketing', spend: 500, revenue: 4000 },
  { channel: 'Organic/SEO', spend: 8000, revenue: 17000 }
];

// Data for new KPIs
const initialKPIs = {
  totalConversions: 3500, // Total from KPI table
  totalSpendUSD: 20000, // Total from financial data
  predictedLTVUSD: 68.20,
  conversionBreakdown: {
    organic: 1500,
    facebook: 1000,
    tiktok: 800,
    email: 200
  }
};

// Cache DOM elements
const financialTable = document.getElementById('financial-table');
const insightsTable = document.getElementById('insights-table');
const currencyRadios = document.querySelectorAll('input[name="currency"]');
const totalRevenueEl = document.getElementById('total-revenue');
const totalSpendEl = document.getElementById('total-spend');
const overallRoiEl = document.getElementById('overall-roi');

// Chart instances
let roiChart, revSpendChart, ltvCacChart, conversionPieChart;

// Utility function to calculate ROI
function calculateROI(revenue, spend) {
  return ((revenue - spend) / spend) * 100;
}

// Function to format numbers based on currency
function formatCurrency(value, currency) {
  if (currency === 'EGP') {
    return `EGP ${Math.round(value).toLocaleString('en-US')}`;
  }
  return `$${Math.round(value).toLocaleString('en-US')}`;
}

// Function to calculate and display advanced KPIs
function updateAdvancedKpis(totalSpendUSD, totalConversions, currency) {
  const cacUSD = totalSpendUSD / totalConversions;
  const ltvUSD = initialKPIs.predictedLTVUSD; // Using the provided LTV from the earlier section
  const ltvCacRatio = ltvUSD / cacUSD;

  const cacEl = document.getElementById('dashboard-cac');
  const ltvEl = document.getElementById('dashboard-ltv');
  const ltvCacEl = document.getElementById('dashboard-ltv-cac');

  let cacValue = cacUSD;
  let ltvValue = ltvUSD;
  let benchmarkLtv = 45.00;
  let benchmarkCac = 10.00;

  if (currency === 'EGP') {
    cacValue *= EGP_USD_RATE;
    ltvValue *= EGP_USD_RATE;
    benchmarkLtv *= EGP_USD_RATE;
    benchmarkCac *= EGP_USD_RATE;
  }

  cacEl.textContent = `${formatCurrency(cacValue, currency)} (Benchmark: ${formatCurrency(benchmarkCac, currency)})`;
  ltvEl.textContent = `${formatCurrency(ltvValue, currency)} (Benchmark: ${formatCurrency(benchmarkLtv, currency)})`;
  ltvCacEl.textContent = `${ltvCacRatio.toFixed(1)}:1 (Goal: 3:1)`;
  ltvCacEl.style.color = ltvCacRatio >= 3 ? 'var(--accent)' : '#e74c3c'; // Gold for success, Red for failure
}


// Chart 1: ROI by Channel (Original)
function initRoiChart() {
  const ctx = document.getElementById('financial-roi-chart').getContext('2d');
  roiChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: financialData.map(d => d.channel),
      datasets: [{
        label: 'ROI %',
        data: financialData.map(d => calculateROI(d.revenue, d.spend)),
        backgroundColor: financialData.map(d => calculateROI(d.revenue, d.spend) > 100 ? 'var(--accent)' : 'rgba(240, 195, 140, 0.4)')
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false }, title: { display: true, text: 'ROI % by Channel', color: 'var(--color-heading)' } },
      scales: {
        y: { beginAtZero: true, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: 'var(--color-text)' } },
        x: { grid: { display: false }, ticks: { color: 'var(--color-text)' } }
      }
    }
  });
}

// Chart 2: Spend vs. Revenue (Original)
function initRevSpendChart(currency) {
  const ctx = document.getElementById('financial-rev-spend-chart').getContext('2d');
  const rate = currency === 'EGP' ? EGP_USD_RATE : 1;
  revSpendChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: financialData.map(d => d.channel),
      datasets: [
        {
          label: 'Spend',
          data: financialData.map(d => d.spend * rate),
          backgroundColor: '#3498db',
        },
        {
          label: 'Revenue',
          data: financialData.map(d => d.revenue * rate),
          backgroundColor: 'var(--accent)',
        }
      ]
    },
    options: {
      responsive: true,
      plugins: { title: { display: true, text: `Spend vs. Revenue (${currency})`, color: 'var(--color-heading)' } },
      scales: {
        y: { beginAtZero: true, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: 'var(--color-text)' } },
        x: { grid: { display: false }, ticks: { color: 'var(--color-text)' } }
      }
    }
  });
}

// Chart 3 (NEW): LTV vs. CAC Comparison
function initLtvCacChart() {
  const ctx = document.getElementById('ltv-cac-chart').getContext('2d');
  const cac = initialKPIs.totalSpendUSD / initialKPIs.totalConversions;
  ltvCacChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Current LTV', 'Current CAC', 'LTV Target (3x CAC)'],
      datasets: [{
        label: 'Value (USD)',
        data: [
          initialKPIs.predictedLTVUSD,
          cac,
          3 * cac // 3x CAC target
        ],
        backgroundColor: ['var(--accent)', '#e74c3c', '#2ecc71'], // Gold, Red, Green
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false }, title: { display: true, text: 'LTV, CAC, and Target Ratio (USD)', color: 'var(--color-heading)' } },
      scales: {
        y: { beginAtZero: true, grid: { color: 'rgba(255, 255, 255, 0.1)' }, ticks: { color: 'var(--color-text)' } },
        x: { grid: { display: false }, ticks: { color: 'var(--color-text)' } }
      }
    }
  });
}

// Chart 4 (NEW): Conversion Rate Breakdown
function initConversionPieChart() {
  const ctx = document.getElementById('conversion-pie-chart').getContext('2d');
  const breakdown = initialKPIs.conversionBreakdown;
  conversionPieChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: Object.keys(breakdown).map(k => k.charAt(0).toUpperCase() + k.slice(1)), // Capitalize
      datasets: [{
        label: 'Conversions',
        data: Object.values(breakdown),
        backgroundColor: ['#2ecc71', 'var(--accent)', '#3498db', '#e74c3c'], // Green, Gold, Blue, Red
        hoverOffset: 4
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'right', labels: { color: 'var(--color-text)' } },
        title: { display: true, text: 'Conversions by Acquisition Channel', color: 'var(--color-heading)' }
      }
    }
  });
}


// MAIN DASHBOARD UPDATE FUNCTION
function updateDashboard(currency) {
  let totalRevenueUSD = 0;
  let totalSpendUSD = 0;

  // 1. Update Financial Table & Calculate Totals (USD)
  const tbody = financialTable.querySelector('tbody');
  tbody.innerHTML = '';

  financialData.forEach(data => {
    let currentSpend = data.spend;
    let currentRevenue = data.revenue;

    if (currency === 'EGP') {
      currentSpend = data.spend * EGP_USD_RATE;
      currentRevenue = data.revenue * EGP_USD_RATE;
    }

    totalSpendUSD += data.spend;
    totalRevenueUSD += data.revenue;

    const roi = calculateROI(data.revenue, data.spend);

    const row = tbody.insertRow();
    row.insertCell().textContent = data.channel;
    row.insertCell().textContent = formatCurrency(currentSpend, currency);
    row.insertCell().textContent = formatCurrency(currentRevenue, currency);
    row.insertCell().textContent = `${roi.toFixed(1)}%`;
  });

  // 2. Update Total KPIs
  const overallROI = calculateROI(totalRevenueUSD, totalSpendUSD);
  totalSpendEl.textContent = `${formatCurrency(totalSpendUSD, 'USD')} / ${formatCurrency(totalSpendUSD * EGP_USD_RATE, 'EGP')}`;
  totalRevenueEl.textContent = `${formatCurrency(totalRevenueUSD, 'USD')} / ${formatCurrency(totalRevenueUSD * EGP_USD_RATE, 'EGP')}`;
  overallRoiEl.textContent = `${overallROI.toFixed(0)}%`;


  // 3. Update Charts
  if (roiChart) roiChart.destroy();
  if (revSpendChart) revSpendChart.destroy();
  if (ltvCacChart) ltvCacChart.destroy();
  if (conversionPieChart) conversionPieChart.destroy();

  initRoiChart();
  initRevSpendChart(currency);
  initLtvCacChart();
  initConversionPieChart();

  // 4. Update Advanced KPI Table
  updateAdvancedKpis(initialKPIs.totalSpendUSD, initialKPIs.totalConversions, currency);

  // 5. Update Insights Table
  updateInsights();
}

// Insights Table (Original - Enhanced Grading Logic)
function updateInsights() {
    const financialRows = financialData;
    const insightsRows = insightsTable.querySelectorAll('tbody tr');

    financialRows.forEach((fRow, index) => {
        let roi = parseFloat(calculateROI(fRow.revenue, fRow.spend));
        insightsRows[index].cells[1].textContent = roi.toFixed(1) + '%';
        let rating = '';
        if (roi > 700) { rating = 'Unbelievable ROI! 🚀'; }
        else if (roi > 150) { rating = 'Exceptional performance 👑'; }
        else if (roi > 100) { rating = 'Excellent performance ✅'; }
        else if (roi > 50) { rating = 'Good performance 👍'; }
        else if (roi > 0) { rating = 'Moderate performance ⚠️'; }
        else { rating = 'Negative ROI 🛑'; }
        insightsRows[index].cells[2].textContent = rating;
    });
}

// Initial Setup and Event Listeners
function setupDashboard() {
  // Initial population of the dashboard
  updateDashboard('USD');

  // Event listeners for currency toggle
  currencyRadios.forEach(radio => {
    radio.addEventListener('change', (e) => {
      updateDashboard(e.target.value);
    });
  });
}

// Ensure Chart.js is loaded before running setup
document.addEventListener('DOMContentLoaded', () => {
  // Give a slight delay to ensure all DOM manipulation is done
  setTimeout(setupDashboard, 100);
});
</script>
</body>
</html>
